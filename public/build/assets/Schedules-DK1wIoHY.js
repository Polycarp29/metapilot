import{b as n,m as k,e as D,f as e,d as L,u as R,l as W,k as S,c as a,g as i,F as y,i as g,t as r,n as m,R as $,y as H,h as w,v as q,j as M,r as c,N as _,S as I}from"./app-CuhZSYnV.js";import{_ as P}from"./AppLayout-BWrW0TOK.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const G={class:"space-y-8"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-3"},O={key:0,class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Q={class:"p-6 pb-4"},X={class:"flex items-start justify-between mb-3"},Z={class:"flex-1 min-w-0"},ee={class:"font-bold text-lg text-slate-900 truncate"},te={class:"text-xs text-slate-400 truncate mt-0.5"},se=["onClick"],le={class:"flex items-center space-x-2 mb-4"},oe={key:0,class:"text-xs text-slate-500"},ne={key:1,class:"text-xs text-slate-500"},ae={class:"grid grid-cols-2 gap-3 text-sm"},re={class:"bg-slate-50 rounded-xl p-3"},ie={class:"font-bold text-slate-900"},de={class:"bg-slate-50 rounded-xl p-3"},ue={class:"bg-slate-50 rounded-xl p-3 col-span-2"},xe={class:"font-bold text-slate-900 text-sm"},be={class:"border-t border-slate-100 px-6 py-3 flex justify-end space-x-2 bg-slate-50/50"},me=["onClick"],ce=["onClick"],fe={key:1,class:"text-center py-20 bg-white rounded-2xl border border-dashed border-slate-300"},pe={key:1,class:"text-sm text-slate-400 mt-4"},ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ye={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-modal-in"},ge={class:"text-xl font-bold text-slate-900 mb-6"},we={key:0},_e=["value"],he={class:"grid grid-cols-4 gap-2"},ke=["onClick"],Se={key:1},Ce={key:2},De=["value"],$e={class:"flex justify-end space-x-3 pt-2"},qe={type:"submit",class:"px-6 py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg shadow-blue-200"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},je={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm p-8"},Ne={class:"text-sm text-slate-500 mb-6"},Be={class:"flex justify-end space-x-3"},Ve={__name:"Schedules",props:{schedules:Array,availableSitemaps:Array},setup(x){const C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=c(!1),d=c(!1),b=c(!1),h=c(null),p=c(null),l=I({sitemap_id:"",frequency:"daily",run_at:"02:00",day_of_week:1,max_depth:3});function j(){l.sitemap_id="",l.frequency="daily",l.run_at="02:00",l.day_of_week=1,l.max_depth=3}function v(){f.value=!1,d.value=!1,h.value=null,j()}function N(){_.post("/crawl-schedules",{...l},{preserveScroll:!0,onSuccess:()=>v()})}function B(o){h.value=o,l.frequency=o.frequency,l.run_at=o.run_at||"02:00",l.day_of_week=o.day_of_week??1,l.max_depth=o.max_depth,d.value=!0}function V(){_.put(`/crawl-schedules/${h.value.id}`,{...l},{preserveScroll:!0,onSuccess:()=>v()})}function T(o){_.put(`/crawl-schedules/${o.id}`,{is_active:!o.is_active},{preserveScroll:!0})}function F(o){p.value=o,b.value=!0}function z(){_.delete(`/crawl-schedules/${p.value.id}`,{preserveScroll:!0,onSuccess:()=>{b.value=!1,p.value=null}})}function A(o){return{hourly:"bg-amber-100 text-amber-700",daily:"bg-blue-100 text-blue-700",weekly:"bg-indigo-100 text-indigo-700",monthly:"bg-violet-100 text-violet-700"}[o]||"bg-slate-100 text-slate-700"}function E(o){return o?o==="completed"||o==="dispatched"?"text-emerald-600":o==="failed"?"text-red-500":"text-amber-500":"text-slate-400"}function U(o){return o?new Date(o).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}return(o,t)=>(n(),k(P,null,{default:D(()=>[e("div",G,[e("div",J,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-600"},"Crawl Schedules"),e("p",{class:"text-slate-500 mt-1"},"Automate your sitemap crawling with recurring schedules")],-1)),e("div",K,[L(R(W),{href:"/sitemaps",class:"px-5 py-2.5 rounded-xl text-sm font-semibold text-slate-600 bg-white border border-slate-200 hover:bg-slate-50 transition-all"},{default:D(()=>[...t[9]||(t[9]=[S(" â† Back to Sitemaps ",-1)])]),_:1}),x.availableSitemaps.length>0?(n(),a("button",{key:0,onClick:t[0]||(t[0]=s=>f.value=!0),class:"flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-blue-200 active:scale-95"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"New Schedule",-1)])])):i("",!0)])]),x.schedules.length>0?(n(),a("div",O,[(n(!0),a(y,null,g(x.schedules,s=>(n(),a("div",{key:s.id,class:"group bg-white rounded-2xl border border-slate-200/50 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden"},[e("div",Q,[e("div",X,[e("div",Z,[e("h3",ee,r(s.sitemap?.name||"Unknown Sitemap"),1),e("p",te,r(s.sitemap?.site_url||s.sitemap?.filename),1)]),e("button",{onClick:u=>T(s),class:m([s.is_active?"bg-emerald-500":"bg-slate-300","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none"])},[e("span",{class:m([s.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,se)]),e("div",le,[e("span",{class:m([A(s.frequency),"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider"])},r(s.frequency),3),s.run_at&&s.frequency!=="hourly"?(n(),a("span",oe," at "+r(s.run_at),1)):i("",!0),s.day_of_week!==null&&s.frequency==="weekly"?(n(),a("span",ne," on "+r(C[s.day_of_week]),1)):i("",!0)]),e("div",ae,[e("div",re,[t[12]||(t[12]=e("div",{class:"text-slate-400 text-xs font-medium mb-0.5"},"Max Depth",-1)),e("div",ie,r(s.max_depth),1)]),e("div",de,[t[13]||(t[13]=e("div",{class:"text-slate-400 text-xs font-medium mb-0.5"},"Last Status",-1)),e("div",{class:m([E(s.last_run_status),"font-bold text-sm capitalize"])},r(s.last_run_status||"Never run"),3)]),e("div",ue,[t[14]||(t[14]=e("div",{class:"text-slate-400 text-xs font-medium mb-0.5"},"Next Run",-1)),e("div",xe,r(s.next_run_at?U(s.next_run_at):"Pending"),1)])])]),e("div",be,[e("button",{onClick:u=>B(s),class:"text-xs font-semibold text-blue-600 hover:text-blue-800 px-3 py-1.5 rounded-lg hover:bg-blue-50 transition-all"}," Edit ",8,me),e("button",{onClick:u=>F(s),class:"text-xs font-semibold text-red-500 hover:text-red-700 px-3 py-1.5 rounded-lg hover:bg-red-50 transition-all"}," Delete ",8,ce)])]))),128))])):(n(),a("div",fe,[t[15]||(t[15]=e("div",{class:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[16]||(t[16]=e("h3",{class:"text-xl font-bold text-slate-900 mb-2"},"No Crawl Schedules Yet",-1)),t[17]||(t[17]=e("p",{class:"text-slate-500 max-w-md mx-auto mb-6"}," Set up automated crawl schedules to keep your sitemaps up-to-date automatically. ",-1)),x.availableSitemaps.length>0?(n(),a("button",{key:0,onClick:t[1]||(t[1]=s=>f.value=!0),class:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3 rounded-xl text-sm font-bold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg shadow-blue-200"}," Create First Schedule ")):(n(),a("p",pe,"Create a sitemap first to set up a schedule."))]))]),(n(),k($,{to:"body"},[f.value||d.value?(n(),a("div",ve,[e("div",{class:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:v}),e("div",ye,[e("h2",ge,r(d.value?"Edit Schedule":"Create Crawl Schedule"),1),e("form",{onSubmit:t[6]||(t[6]=H(s=>d.value?V():N(),["prevent"])),class:"space-y-5"},[d.value?i("",!0):(n(),a("div",we,[t[19]||(t[19]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Sitemap",-1)),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.sitemap_id=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-sm",required:""},[t[18]||(t[18]=e("option",{value:"",disabled:""},"Select a sitemap...",-1)),(n(!0),a(y,null,g(x.availableSitemaps,s=>(n(),a("option",{key:s.id,value:s.id},r(s.name)+" "+r(s.site_url?`(${s.site_url})`:""),9,_e))),128))],512),[[q,l.sitemap_id]])])),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Frequency",-1)),e("div",he,[(n(),a(y,null,g(["hourly","daily","weekly","monthly"],s=>e("button",{key:s,type:"button",onClick:u=>l.frequency=s,class:m([l.frequency===s?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:border-blue-300","px-3 py-2 rounded-xl border text-xs font-bold uppercase tracking-wider transition-all text-center"])},r(s),11,ke)),64))])]),l.frequency!=="hourly"?(n(),a("div",Se,[t[21]||(t[21]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Run At (Time of Day)",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.run_at=s),type:"time",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-sm"},null,512),[[M,l.run_at]])])):i("",!0),l.frequency==="weekly"?(n(),a("div",Ce,[t[22]||(t[22]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Day of Week",-1)),w(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.day_of_week=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-sm"},[(n(),a(y,null,g(C,(s,u)=>e("option",{key:u,value:u},r(s),9,De)),64))],512),[[q,l.day_of_week,void 0,{number:!0}]])])):i("",!0),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1.5"},"Max Crawl Depth",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.max_depth=s),type:"number",min:"1",max:"10",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-sm"},null,512),[[M,l.max_depth,void 0,{number:!0}]])]),e("div",$e,[e("button",{type:"button",onClick:v,class:"px-5 py-2.5 rounded-xl text-sm font-semibold text-slate-600 bg-slate-100 hover:bg-slate-200 transition-all"},"Cancel"),e("button",qe,r(d.value?"Save Changes":"Create Schedule"),1)])],32)])])):i("",!0)])),(n(),k($,{to:"body"},[b.value?(n(),a("div",Me,[e("div",{class:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:t[7]||(t[7]=s=>b.value=!1)}),e("div",je,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-slate-900 mb-3"},"Delete Schedule?",-1)),e("p",Ne,[t[24]||(t[24]=S("This will permanently delete the crawl schedule for ",-1)),e("strong",null,r(p.value?.sitemap?.name),1),t[25]||(t[25]=S(".",-1))]),e("div",Be,[e("button",{onClick:t[8]||(t[8]=s=>b.value=!1),class:"px-5 py-2.5 rounded-xl text-sm font-semibold text-slate-600 bg-slate-100 hover:bg-slate-200 transition-all"},"Cancel"),e("button",{onClick:z,class:"px-6 py-2.5 rounded-xl text-sm font-bold text-white bg-red-500 hover:bg-red-600 transition-all shadow-lg shadow-red-200"},"Delete")])])])):i("",!0)]))]),_:1}))}},Ee=Y(Ve,[["__scopeId","data-v-6e57b2bb"]]);export{Ee as default};
