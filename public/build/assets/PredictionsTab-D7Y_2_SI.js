import{o as F,b as a,c as r,f as e,n as f,k as V,t as n,F as d,i as c,x as v,g as _,m as M,u as B,p as E,s as k,r as g,q as b}from"./app-7OfXOeu3.js";import{C as N,R as G,P as H,b as T,i as W,c as q,d as U,a as Y,L as $,B as J}from"./chart-BeBNpv4U.js";import{L as K,R as Q}from"./index-DIb08Rm_.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const Z={class:"space-y-10 animate-in fade-in duration-500 pb-20"},ee={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-6"},te={class:"flex items-center gap-4"},se=["disabled"],ae={key:0,class:"space-y-8"},re={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},oe={key:1,class:"max-w-2xl mx-auto py-20 text-center"},le={key:2,class:"bg-slate-50 p-20 rounded-[4rem] text-center border-2 border-dashed border-slate-200"},ne={key:3,class:"space-y-12"},ie={class:"bg-gradient-to-br from-blue-600 to-indigo-800 rounded-[3rem] p-10 text-white shadow-2xl shadow-blue-600/30 relative overflow-hidden"},de={class:"relative z-10 flex flex-col md:flex-row gap-10"},ce={class:"flex-1"},pe={class:"text-4xl font-black mb-6 tracking-tight leading-tight"},ue={class:"flex items-center gap-8 mt-10 border-t border-white/10 pt-10"},be={class:"text-[10px] font-black text-blue-200 uppercase tracking-widest"},fe={class:"text-2xl font-black mt-1"},ve={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ge={class:"flex items-center justify-between mb-8"},xe={class:"w-14 h-14 rounded-2xl flex items-center justify-center text-slate-900 bg-slate-50 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-500"},me={class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he=["d"],ye={class:"text-xl font-black text-slate-900 leading-snug mb-3"},_e={class:"text-slate-500 text-sm font-medium leading-relaxed mb-8"},ke={key:0,class:"p-6 bg-slate-50 rounded-2xl mb-8 border border-slate-100"},we={class:"flex flex-wrap gap-4"},Ce={class:"text-xs font-black text-slate-700"},je={key:1,class:"space-y-4"},Me={class:"shrink-0 w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-black"},Be={class:"text-xs font-bold text-slate-600 leading-relaxed"},Le={class:"grid grid-cols-1 lg:grid-cols-2 gap-10"},Pe={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},Se={class:"h-64"},ze={key:1,class:"h-full flex items-center justify-center text-slate-300 font-black italic text-sm"},Ie={class:"grid grid-cols-3 gap-6 mt-10 pt-10 border-t border-slate-50 text-center"},Ae={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},Re={class:"text-xl font-black text-slate-900"},De={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},Oe={class:"h-80 flex items-center justify-center"},Fe={key:1,class:"text-slate-300 font-black text-sm"},Ve={key:0,class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium overflow-hidden relative"},Ee={class:"space-y-8"},Ne={class:"flex items-center justify-between mb-3 px-2"},Ge={class:"text-sm font-black text-slate-800"},He={class:"flex items-center gap-4"},Te={class:"text-sm font-black text-slate-900"},We={class:"h-4 bg-slate-50 rounded-full overflow-hidden border border-slate-100 p-0.5"},qe={key:1,class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium text-center"},Ue={__name:"PredictionsTab",props:{propertyId:Number,organization:Object},setup(L){N.register(G,H,T,W,q,U,Y,$,J);const x=L,i=g("loading"),m=g(null),l=g({propensity_scores:{},source_fatigue:{},performance_rankings:[],ad_performance:[],sessions:{},conversions:{},strategic_strategy:{summary:"",recommendations:[],diagnostics:{}}}),w=g(null),P=async()=>{i.value="loading";try{const[o,t]=await Promise.all([k.get(route("analytics.forecasts",{property:x.propertyId})),k.get(route("api.analytics.forecast",{property:x.propertyId}))]),s=o.data;l.value={propensity_scores:s.propensity_scores||{},source_fatigue:s.source_fatigue||{},performance_rankings:s.performance_rankings||[],ad_performance:s.ad_performance||[],strategic_strategy:s.strategic_strategy||{summary:"",recommendations:[],diagnostics:{}},sessions:s.sessions||{},conversions:s.conversions||{}},w.value=t.data;const p=Object.keys(l.value.propensity_scores).length>0||Object.keys(l.value.source_fatigue).length>0||l.value.performance_rankings.length>0||!!l.value.strategic_strategy.summary;i.value=p?"ready":"empty"}catch(o){console.error("Failed to fetch forecasts:",o),i.value="error"}},C=async()=>{i.value="running",m.value=null;try{const t=(await k.post(route("analytics.refresh-predictions",{property:x.propertyId}))).data;if(t.error){m.value=t.error,i.value="empty";return}l.value={propensity_scores:t.propensity_scores||{},source_fatigue:t.source_fatigue||{},performance_rankings:t.performance_rankings||[],ad_performance:t.ad_performance||[],strategic_strategy:t.strategic_strategy||{summary:"",recommendations:[],diagnostics:{}},sessions:t.sessions||{},conversions:t.conversions||{}},i.value="ready"}catch(o){m.value=o.response?.data?.error||"Internal error. Check that the Python service is running.",i.value="empty"}};F(P);const j=b(()=>Object.keys(l.value.propensity_scores).length>0),S=b(()=>{if(!j.value)return{labels:[],datasets:[]};const o=Object.keys(l.value.propensity_scores),t=Object.values(l.value.propensity_scores);return{labels:o,datasets:[{label:"Conversion Probability",data:t,backgroundColor:"rgba(59, 130, 246, 0.15)",borderColor:"#3b82f6",pointBackgroundColor:"#3b82f6",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#3b82f6",borderWidth:2,pointBorderWidth:2,pointRadius:4}]}}),z={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",padding:10,cornerRadius:8,callbacks:{label:o=>` ${(o.raw*100).toFixed(1)}% probability`}}},scales:{r:{angleLines:{color:"rgba(0,0,0,0.08)"},grid:{color:"rgba(0,0,0,0.06)"},pointLabels:{font:{size:11,weight:"bold"},color:"#475569"},ticks:{display:!1},suggestedMin:0,suggestedMax:1}}},h=b(()=>l.value.sessions||{}),I=b(()=>Object.keys(h.value).length>0),A=b(()=>{const o=h.value,t=["Now","30 Days","90 Days","180 Days"],s=[w.value?.users?.[0]?.value||0,o["30d"]?.predicted||0,o["90d"]?.predicted||0,o["180d"]?.predicted||0];return{labels:t,datasets:[{label:"Predicted Traffic",data:s,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:4,fill:!0,tension:.4,pointRadius:6,pointBackgroundColor:"#fff",pointBorderWidth:3}]}}),R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{grid:{color:"rgba(0,0,0,0.04)"}},x:{grid:{display:!1}}}},D=o=>{switch(o?.toLowerCase()){case"critical":return"bg-rose-50 text-rose-700 border-rose-200";case"high":return"bg-amber-50 text-amber-700 border-amber-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}},O=o=>{switch(o){case"ads":return"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z";case"seo":return"M7 16V4m0 12l-4-4m4 4l4-4m6 0v12m0-12l-4 4m4-4l4 4";default:return"M13 10V3L4 14h7v7l9-11h-7z"}};return(o,t)=>(a(),r("div",Z,[e("div",ee,[t[1]||(t[1]=e("div",null,[e("h2",{class:"text-3xl font-black text-slate-900 tracking-tight"},"Strategic Intelligence"),e("p",{class:"text-slate-500 font-medium mt-1"},"Multi-source correlation & predictive strategy")],-1)),e("div",te,[e("button",{onClick:C,disabled:i.value==="running"||i.value==="loading",class:"group flex items-center gap-3 px-6 py-3 bg-slate-900 hover:bg-black disabled:opacity-50 text-white text-xs font-black uppercase tracking-widest rounded-2xl transition-all shadow-2xl shadow-slate-900/20 active:scale-95"},[(a(),r("svg",{class:f(["w-5 h-5 transition-transform group-hover:rotate-180",{"animate-spin":i.value==="running"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[0]||(t[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),V(" "+n(i.value==="running"?"Analyzing…":"Regenerate Strategy"),1)],8,se)])]),i.value==="loading"?(a(),r("div",ae,[t[2]||(t[2]=e("div",{class:"h-40 bg-slate-50 rounded-[3rem] animate-pulse"},null,-1)),e("div",re,[(a(),r(d,null,c(3,s=>e("div",{key:s,class:"h-64 bg-slate-50 rounded-3xl animate-pulse"})),64))])])):i.value==="running"?(a(),r("div",oe,[...t[3]||(t[3]=[v('<div class="relative w-32 h-32 mx-auto mb-10" data-v-b76f6281><div class="absolute inset-0 rounded-full border-4 border-blue-100 animate-ping" data-v-b76f6281></div><div class="relative w-full h-full bg-blue-600 rounded-full flex items-center justify-center text-white shadow-2xl shadow-blue-600/40" data-v-b76f6281><svg class="w-12 h-12 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b76f6281><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-b76f6281></path></svg></div></div><h3 class="text-3xl font-black text-slate-900 mb-4" data-v-b76f6281>Processing Deep Intelligence</h3><p class="text-slate-500 font-medium leading-relaxed" data-v-b76f6281> Correlating GA4 session data with GSC search intent and Ad performance... <br data-v-b76f6281><span class="text-blue-600 font-black" data-v-b76f6281>Generating 180-day forecasts.</span></p>',3)])])):i.value==="empty"?(a(),r("div",le,[t[4]||(t[4]=v('<div class="w-20 h-20 bg-white rounded-3xl shadow-sm border border-slate-100 flex items-center justify-center mx-auto mb-8 text-slate-400" data-v-b76f6281><svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b76f6281><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-b76f6281></path></svg></div><h3 class="text-2xl font-black text-slate-900 mb-4" data-v-b76f6281>No Strategy Data Yet</h3><p class="text-slate-500 max-w-sm mx-auto mb-10" data-v-b76f6281>Generate your first strategic analysis to see prioritized growth recommendations.</p>',3)),e("button",{onClick:C,class:"px-8 py-4 bg-blue-600 text-white font-black rounded-2xl shadow-xl shadow-blue-600/20"},"Analyze Now")])):i.value==="ready"?(a(),r("div",ne,[e("div",ie,[t[7]||(t[7]=e("div",{class:"absolute top-0 right-0 p-10 opacity-10"},[e("svg",{class:"w-40 h-40",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),e("div",de,[e("div",ce,[t[5]||(t[5]=e("div",{class:"flex items-center gap-3 mb-6"},[e("span",{class:"px-4 py-1.5 bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/20"},"AI Briefing"),e("span",{class:"text-blue-100 text-[10px] font-black uppercase tracking-widest"},"Property Health: Excellent")],-1)),e("h3",pe,n(l.value.strategic_strategy?.summary||"Performance is stable across all primary channels."),1),e("div",ue,[(a(!0),r(d,null,c(l.value.strategic_strategy?.diagnostics,(s,p)=>(a(),r("div",{key:p},[e("p",be,n(p.replace("_"," ")),1),e("p",fe,n(s),1)]))),128))])]),t[6]||(t[6]=v('<div class="w-full md:w-80 bg-white/10 backdrop-blur-xl border border-white/10 rounded-[2.5rem] p-8" data-v-b76f6281><p class="text-[10px] font-black text-blue-200 uppercase tracking-widest mb-6" data-v-b76f6281>Strategy Potential</p><div class="space-y-6" data-v-b76f6281><div data-v-b76f6281><div class="flex justify-between text-xs font-black mb-2" data-v-b76f6281><span data-v-b76f6281>Conversion Lift</span><span data-v-b76f6281>+18%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-b76f6281><div class="h-full bg-emerald-400 w-[70%]" data-v-b76f6281></div></div></div><div data-v-b76f6281><div class="flex justify-between text-xs font-black mb-2" data-v-b76f6281><span data-v-b76f6281>SEO Visibility</span><span data-v-b76f6281>+24%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-b76f6281><div class="h-full bg-blue-300 w-[85%]" data-v-b76f6281></div></div></div><div data-v-b76f6281><div class="flex justify-between text-xs font-black mb-2" data-v-b76f6281><span data-v-b76f6281>Ads Optimization</span><span data-v-b76f6281>+12%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-b76f6281><div class="h-full bg-amber-400 w-[40%]" data-v-b76f6281></div></div></div></div></div>',1))])]),e("div",null,[t[11]||(t[11]=e("h4",{class:"text-xl font-black text-slate-900 mb-8 px-2"},"Growth Strategy Map",-1)),e("div",ve,[(a(!0),r(d,null,c(l.value.strategic_strategy?.recommendations,(s,p)=>(a(),r("div",{key:p,class:"group bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium hover:shadow-2xl transition-all duration-500 hover:-translate-y-2"},[e("div",ge,[e("div",xe,[(a(),r("svg",me,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:O(s.type)},null,8,he)]))]),e("span",{class:f(["px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border",D(s.priority)])},n(s.priority),3)]),e("h5",ye,n(s.title),1),e("p",_e,n(s.rationale),1),s.expected_impact?(a(),r("div",ke,[t[9]||(t[9]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4"},"Impact Forecast",-1)),e("div",we,[(a(!0),r(d,null,c(s.expected_impact,(y,u)=>(a(),r("div",{key:u,class:"flex items-center gap-2"},[t[8]||(t[8]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-500"},null,-1)),e("span",Ce,n(u.replace("_"," "))+": "+n(y),1)]))),128))])])):_("",!0),s.actions&&s.actions.length?(a(),r("div",je,[t[10]||(t[10]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest"},"Next Steps",-1)),(a(!0),r(d,null,c(s.actions,(y,u)=>(a(),r("div",{key:u,class:"flex gap-4"},[e("div",Me,n(u+1),1),e("p",Be,n(y.description),1)]))),128))])):_("",!0)]))),128))])]),e("div",Le,[e("div",Pe,[t[12]||(t[12]=v('<div class="flex items-center justify-between mb-10" data-v-b76f6281><div data-v-b76f6281><h3 class="text-xl font-black text-slate-900" data-v-b76f6281>180-Day Traffic Forecast</h3><p class="text-xs text-slate-400 font-medium mt-1" data-v-b76f6281>AI modeling based on seasonal search trends</p></div><div class="flex gap-2" data-v-b76f6281><span class="px-3 py-1 bg-blue-50 text-blue-600 text-[10px] font-black rounded-lg border border-blue-100" data-v-b76f6281>Prophet Model</span></div></div>',1)),e("div",Se,[I.value?(a(),M(B(K),{key:0,data:A.value,options:R},null,8,["data"])):(a(),r("div",ze,"Generating projection..."))]),e("div",Ie,[(a(),r(d,null,c(["30d","90d","180d"],s=>e("div",{key:s},[e("p",Ae,n(s)+" Prediction",1),e("p",Re,n(h.value[s]?.predicted||"—"),1)])),64))])]),e("div",De,[t[13]||(t[13]=e("h3",{class:"text-xl font-black text-slate-900 mb-2"},"Intent Propensity",-1)),t[14]||(t[14]=e("p",{class:"text-xs text-slate-400 font-medium mb-10"},"Channel conversion probability for fresh leads",-1)),e("div",Oe,[j.value?(a(),M(B(Q),{key:0,data:S.value,options:z},null,8,["data"])):(a(),r("p",Fe,"Waiting for ML data..."))])])]),l.value.performance_rankings&&l.value.performance_rankings.length?(a(),r("div",Ve,[t[15]||(t[15]=e("div",{class:"flex items-center justify-between mb-8"},[e("h3",{class:"text-xl font-black text-slate-900"},"Global Channel Efficiency"),e("span",{class:"text-xs font-bold text-slate-400"},"Total reach: 100% normalized")],-1)),e("div",Ee,[(a(!0),r(d,null,c(l.value.performance_rankings,s=>(a(),r("div",{key:s.channel,class:"group"},[e("div",Ne,[e("span",Ge,n(s.channel),1),e("div",He,[e("span",{class:f(["text-[10px] font-black uppercase tracking-widest",s.efficiency_index>=.7?"text-emerald-500":"text-slate-400"])},n(s.efficiency_index>=.7?"Excellent":s.efficiency_index>=.4?"Stable":"Underperforming"),3),e("span",Te,n((s.propensity*100).toFixed(0))+"%",1)])]),e("div",We,[e("div",{class:f(["h-full rounded-full transition-all duration-1000",s.efficiency_index>=.7?"bg-blue-600":s.efficiency_index>=.4?"bg-indigo-400":"bg-slate-300"]),style:E({width:Math.min(s.propensity*100,100)+"%"})},null,6)])]))),128))])])):(a(),r("div",qe,[...t[16]||(t[16]=[e("p",{class:"py-20 text-slate-300 font-black italic text-sm"},"Awaiting multi-channel analysis...",-1)])]))])):_("",!0)]))}},Xe=X(Ue,[["__scopeId","data-v-b76f6281"]]);export{Xe as default};
