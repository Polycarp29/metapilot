import{o as w,b as r,c as n,f as e,F as c,i as p,k as u,d as f,u as b,t as i,p as C,n as B,s as j,r as g,q as h}from"./app-DsGSTWnI.js";import{C as L,R as P,P as F,b as S,i as E,c as I,d as M,a as O,L as R,B as V,f as z,g as H}from"./index-Cu00u2FS.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const T={class:"space-y-10 animate-in fade-in duration-500"},A={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},D={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},q={class:"bg-white p-8 rounded-[3rem] border border-slate-100 shadow-premium"},G={class:"h-64 flex items-center justify-center"},J={class:"bg-white p-8 rounded-[3rem] border border-slate-100 shadow-premium"},K={class:"h-64"},Q={class:"lg:col-span-2 bg-white p-8 rounded-[3rem] border border-slate-100 shadow-premium"},U={class:"overflow-x-auto"},W={class:"w-full text-left"},X={class:"divide-y divide-slate-50"},Y={class:"py-4 px-4"},Z={class:"text-sm font-bold text-slate-700"},$={class:"py-4 text-center"},ee={class:"flex items-center justify-center gap-2"},te={class:"w-16 h-1.5 bg-slate-100 rounded-full overflow-hidden"},se={class:"text-xs font-black text-slate-900"},ae={class:"py-4 text-right pr-4"},oe={__name:"PredictionsTab",props:{propertyId:Number,organization:Object},setup(m){L.register(P,F,S,E,I,M,O,R,V);const x=m,l=g(!0),o=g({propensity_scores:{},source_fatigue:{},performance_rankings:[]}),d=async()=>{l.value=!0;try{const a=await j.get(route("analytics.forecasts",{property:x.propertyId}));o.value=a.data}catch(a){console.error("Failed to fetch forecasts:",a)}finally{l.value=!1}};w(()=>{d()});const v=h(()=>{const a=Object.keys(o.value.propensity_scores||{}),t=Object.values(o.value.propensity_scores||{});return{labels:a,datasets:[{label:"Conversion Probability",data:t,backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"#3b82f6",pointBackgroundColor:"#3b82f6",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#3b82f6"}]}}),_={scales:{r:{angleLines:{display:!1},suggestedMin:0,suggestedMax:1}}},y=h(()=>{const a=Object.keys(o.value.source_fatigue||{}),t=a.map(s=>o.value.source_fatigue[s].trend_percentage);return{labels:a,datasets:[{label:"Predicted Trend (%)",data:t,backgroundColor:t.map(s=>s<-10?"rgba(239, 68, 68, 0.6)":"rgba(16, 185, 129, 0.6)"),borderRadius:8}]}}),k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}};return(a,t)=>(r(),n("div",T,[e("div",{class:"flex items-center justify-between mb-8"},[t[1]||(t[1]=e("div",null,[e("h2",{class:"text-2xl font-black text-slate-900"},"Predictions & Insights"),e("p",{class:"text-slate-500 font-medium mt-1"},"AI-driven forecasts for your property")],-1)),e("button",{onClick:d,class:"p-2 hover:bg-slate-100 rounded-xl transition-all"},[...t[0]||(t[0]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])]),l.value?(r(),n("div",A,[(r(),n(c,null,p(2,s=>e("div",{key:s,class:"bg-white p-8 rounded-[3rem] border border-slate-100 shadow-premium h-80 animate-pulse"})),64))])):(r(),n("div",D,[e("div",q,[t[2]||(t[2]=e("h3",{class:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),u(" Lead Propensity by Channel ")],-1)),e("div",G,[f(b(z),{data:v.value,options:_},null,8,["data"])])]),e("div",J,[t[3]||(t[3]=e("h3",{class:"text-lg font-black text-slate-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})]),u(" Source Fatigue Forecast ")],-1)),e("div",K,[f(b(H),{data:y.value,options:k},null,8,["data"])])]),e("div",Q,[t[5]||(t[5]=e("h3",{class:"text-lg font-black text-slate-900 mb-6"},"Cross-Channel Efficiency Ranking",-1)),e("div",U,[e("table",W,[t[4]||(t[4]=e("thead",null,[e("tr",{class:"border-b border-slate-50"},[e("th",{class:"pb-4 text-[10px] font-black text-slate-400 uppercase tracking-widest px-4"},"Channel"),e("th",{class:"pb-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center"},"Propensity Score"),e("th",{class:"pb-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right pr-4"},"Efficiency Index")])],-1)),e("tbody",X,[(r(!0),n(c,null,p(o.value.performance_rankings,s=>(r(),n("tr",{key:s.channel,class:"hover:bg-slate-50 transition-all"},[e("td",Y,[e("span",Z,i(s.channel),1)]),e("td",$,[e("div",ee,[e("div",te,[e("div",{class:"h-full bg-blue-500 rounded-full",style:C({width:s.propensity*100+"%"})},null,4)]),e("span",se,i((s.propensity*100).toFixed(1))+"%",1)])]),e("td",ae,[e("span",{class:B(["text-sm font-black",s.efficiency_index>.5?"text-emerald-600":"text-slate-900"])},i(s.efficiency_index.toFixed(4)),3)])]))),128))])])])])]))]))}},de=N(oe,[["__scopeId","data-v-8855540b"]]);export{de as default};
