import{s as i,y as X,o as a,c as q,w as E,a as e,d as $,u as G,i as K,t as d,b as N,e as n,f as S,F as B,r as I,n as M,h as L,v as P,N as Q,z as Z}from"./app-8GARB5Ng.js";import{u as ee,_ as te}from"./AppLayout-oeg8h9Ny.js";import se from"./FieldItem-BcV3HpvX.js";/* empty css            */const le={class:"space-y-8"},re={class:"glass sticky top-[80px] z-30 -mx-6 px-6 py-6 border-b border-slate-200/50 flex flex-col md:flex-row justify-between items-center gap-6 mb-10 shadow-sm"},oe={class:"flex items-center gap-6"},ae={class:"flex items-center gap-3 mb-1"},ne={class:"text-3xl font-extrabold text-slate-900 tracking-tight"},ie={class:"px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black uppercase tracking-widest border border-blue-100"},de={class:"text-sm text-slate-400 font-medium tracking-tight truncate max-w-sm"},ce={class:"flex items-center gap-4 w-full md:w-auto"},ue=["href"],pe=["disabled"],xe={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},be={class:"grid grid-cols-1 xl:grid-cols-2 gap-12 items-start"},fe={class:"space-y-8 pb-32"},he={class:"space-y-6"},me={key:0,class:"flex flex-col items-center justify-center py-32 bg-white/50 border-2 border-dashed border-slate-200 rounded-[2.5rem] text-center px-10"},ve={class:"sticky top-[200px] space-y-8"},ge={class:"bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 overflow-hidden flex flex-col h-[75vh]"},we={class:"px-8 py-6 bg-black/40 border-b border-white/5 flex justify-between items-center backdrop-blur-md"},ye={class:"flex items-center gap-3"},ke={class:"flex-grow p-8 font-mono text-[13px] overflow-auto custom-scrollbar-dark selection:bg-blue-500/30 relative"},_e={key:1,class:"bg-transparent"},je={class:"grid gap-1"},Ce={class:"text-slate-700 w-8 text-right select-none pr-4 border-r border-slate-800"},Ne=["innerHTML"],Se={class:"px-8 py-5 bg-black/40 border-t border-white/5 flex items-center justify-between"},Me={class:"flex gap-4"},Oe={class:"flex flex-col"},Fe={class:"flex items-center gap-2 group cursor-help"},Je={class:"text-[11px] font-bold text-slate-400 group-hover:text-emerald-400 transition-colors"},De={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-md"},Ee={class:"bg-white w-full max-w-2xl rounded-[3rem] shadow-premium p-12 relative scale-in-center"},$e={class:"space-y-8"},Be={class:"space-y-3"},Ve={__name:"Edit",props:{schema:Object,schemaTypes:Array},setup(p){const _=ee(),h=p,O=s=>s.map(t=>({...t,children:O(t.recursive_children||[])})),o=i(h.schema.root_fields?O(JSON.parse(JSON.stringify(h.schema.root_fields))):[]),v=i(""),x=i(!1),g=i(!1),w=i(""),c=i(!1),y=i(""),b=i(!1),T=Z(()=>v.value.split(`
`)),F=()=>{o.value.push({field_path:"",field_type:"text",field_value:"",children:[]}),u()},V=s=>{o.value.splice(s,1),u()},R=s=>{const t=JSON.parse(JSON.stringify(o.value[s]));o.value.splice(s+1,0,t),u()},j=s=>{const t={};return s.forEach(l=>{l.field_path&&(l.field_type==="object"?t[l.field_path]=j(l.children||[]):l.field_type==="array"?t[l.field_path]=(l.children||[]).map(r=>r.field_type==="object"?j(r.children||[]):J(r.field_value,r.field_type)):t[l.field_path]=J(l.field_value,l.field_type))}),t},J=(s,t)=>t==="number"?parseFloat(s)||0:t==="boolean"?s==="true"||s===!0:s,u=()=>{const s={"@context":"https://schema.org","@type":h.schema.schema_type.name,"@id":h.schema.schema_id,...j(o.value)};v.value=JSON.stringify(s,null,2),c.value||(y.value=v.value)},D=s=>typeof s=="number"?"number":typeof s=="boolean"?"boolean":typeof s=="string"&&(s.startsWith("http://")||s.startsWith("https://"))?"url":"text",k=s=>Object.entries(s).filter(([t])=>!["@context","@type","@id"].includes(t)).map(([t,l])=>{let r="text",f=l,C=[];return Array.isArray(l)?(r="array",f="",C=l.map(m=>typeof m=="object"&&m!==null?{field_path:"",field_type:"object",field_value:"",children:k(m)}:{field_path:"",field_type:D(m),field_value:m,children:[]})):typeof l=="object"&&l!==null?(r="object",f="",C=k(l)):(r=D(l),f=l),{field_path:t,field_type:r,field_value:f,children:C}}),z=()=>{try{const s=JSON.parse(w.value),t=k(s);o.value=[...o.value,...t],u(),g.value=!1,w.value="",_.success("Intelligence Interpreter has expanded the form architecture!")}catch{_.error("Parse Error: Please ensure you are pasting valid JSON-LD.")}},H=()=>{c.value=!c.value,c.value||u()},A=()=>{try{const s=JSON.parse(y.value);b.value=!1,o.value=k(s)}catch{b.value=!0}},U=()=>{x.value=!0,Q.post(`/schemas/${h.schema.id}/fields/bulk`,{fields:o.value},{onSuccess:()=>{x.value=!1},onError:()=>{x.value=!1}})},W=s=>s.replace(/"([^"]+)"(?=:)/g,'<span class="text-blue-400">"$1"</span>').replace(new RegExp('(?<=: )"([^"]+)"',"g"),'<span class="text-emerald-300">"$1"</span>').replace(new RegExp("(?<=: )(\\d+)","g"),'<span class="text-amber-400">$1</span>'),Y=()=>{navigator.clipboard.writeText(v.value),_.success("Optimized JSON-LD copied to clipboard!")};return X(()=>{u()}),(s,t)=>(a(),q(te,{title:`Editing ${p.schema.name}`},{default:E(()=>[e("div",le,[e("div",re,[e("div",oe,[$(G(K),{href:"/schemas",class:"hidden lg:flex items-center justify-center w-12 h-12 bg-white rounded-2xl border border-slate-200 text-slate-400 hover:text-slate-900 transition-standard shadow-sm active:scale-90"},{default:E(()=>[...t[4]||(t[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e("div",null,[e("div",ae,[e("h1",ne,d(p.schema.name),1),e("span",ie,d(p.schema.schema_type.name),1)]),e("p",de,d(p.schema.schema_id),1)])]),e("div",ce,[e("a",{href:`/schemas/${p.schema.id}/export`,class:"flex-grow md:flex-grow-0 inline-flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-700 font-bold px-6 py-3.5 rounded-2xl hover:bg-slate-50 transition-standard active:scale-95 text-sm"},[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),N(" Export JSON ",-1)])],8,ue),e("button",{onClick:U,disabled:x.value,class:"flex-grow md:flex-grow-0 inline-flex items-center justify-center gap-2 bg-slate-900 border border-slate-800 text-white font-bold px-10 py-3.5 rounded-2xl hover:bg-slate-800 transition-standard shadow-xl shadow-slate-200 active:scale-95 disabled:opacity-50 text-sm"},[x.value?(a(),n("span",xe)):S("",!0),N(" "+d(x.value?"Syncing...":"Save Changes"),1)],8,pe)])]),e("div",be,[e("div",fe,[t[10]||(t[10]=e("div",{class:"flex justify-between items-center mb-2"},[e("h3",{class:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] ml-2"},"Properties Map")],-1)),e("div",he,[(a(!0),n(B,null,I(o.value,(l,r)=>(a(),n("div",{key:r},[$(se,{field:l,onRemove:f=>V(r),onDuplicate:f=>R(r),onUpdate:u},null,8,["field","onRemove","onDuplicate"])]))),128)),e("div",{class:"pt-6"},[e("button",{onClick:F,class:"group flex items-center gap-3 bg-white border-2 border-dashed border-slate-200 w-full py-6 rounded-[2rem] text-slate-400 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600 transition-standard active:scale-[0.98]"},[...t[6]||(t[6]=[e("div",{class:"mx-auto flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-standard"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])]),e("span",{class:"text-sm font-black uppercase tracking-widest"},"New Property Layer")],-1)])])]),o.value.length===0?(a(),n("div",me,[t[7]||(t[7]=e("div",{class:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[8]||(t[8]=e("h4",{class:"text-xl font-bold text-slate-900 mb-2 font-display"},"No Metadata Defined",-1)),t[9]||(t[9]=e("p",{class:"text-slate-500 font-medium mb-10 max-w-xs"},"Start configuring your JSON-LD by adding properties to the root level.",-1)),e("button",{onClick:F,class:"bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold hover:bg-blue-500 transition-standard active:scale-95 shadow-lg shadow-blue-100"}," Insert First Property ")])):S("",!0)])]),e("div",ve,[e("div",ge,[e("div",we,[t[12]||(t[12]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-3 h-3 bg-red-500/80 rounded-full"}),e("div",{class:"w-3 h-3 bg-amber-500/80 rounded-full"}),e("div",{class:"w-3 h-3 bg-emerald-500/80 rounded-full"}),e("span",{class:"ml-4 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})]),N(" Real-time Intelligence ")])],-1)),e("div",ye,[e("button",{onClick:H,class:M([c.value?"bg-emerald-500 text-white":"bg-white/5 text-slate-400 hover:text-white","px-4 py-2 rounded-xl transition-standard border border-white/5 text-[10px] font-black uppercase tracking-widest active:scale-90"])},d(c.value?"Viewing Highlighted":"Edit as Code"),3),e("button",{onClick:t[0]||(t[0]=l=>g.value=!0),class:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 px-4 py-2 rounded-xl transition-standard border border-blue-500/20 text-[10px] font-black uppercase tracking-widest active:scale-90"}," Import Code "),e("button",{onClick:Y,class:"bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white p-3 rounded-xl transition-standard border border-white/5 active:scale-90",title:"Copy Code"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)])])])]),e("div",ke,[c.value?L((a(),n("textarea",{key:0,"onUpdate:modelValue":t[1]||(t[1]=l=>y.value=l),onInput:A,class:"absolute inset-0 w-full h-full p-8 bg-transparent text-slate-300 resize-none border-none focus:ring-0 font-mono text-[13px] custom-scrollbar-dark",spellcheck:"false"},null,544)),[[P,y.value]]):(a(),n("pre",_e,[e("code",je,[(a(!0),n(B,null,I(T.value,(l,r)=>(a(),n("span",{key:r,class:"flex gap-6"},[e("span",Ce,d(r+1),1),e("span",{class:"text-slate-300 whitespace-pre",innerHTML:W(l)},null,8,Ne)]))),128))])]))]),e("div",Se,[e("div",Me,[e("div",Oe,[t[13]||(t[13]=e("span",{class:"text-[9px] font-black text-slate-500 uppercase tracking-widest"},"Compiler",-1)),e("span",{class:M([b.value?"text-red-400":"text-emerald-400","text-[11px] font-bold"])},d(b.value?"SYNTAX ERROR":"READY"),3)]),t[14]||(t[14]=e("div",{class:"w-px h-8 bg-slate-800 mx-2"},null,-1)),t[15]||(t[15]=e("div",{class:"flex flex-col"},[e("span",{class:"text-[9px] font-black text-slate-500 uppercase tracking-widest"},"Protocol"),e("span",{class:"text-[11px] text-blue-400 font-bold"},"JSON-LD 1.1")],-1))]),e("div",Fe,[e("span",{class:M([b.value?"bg-red-500":"bg-emerald-500","w-2 h-2 rounded-full shadow-[0_0_8px_rgba(16,185,129,0.5)]"])},null,2),e("span",Je,d(b.value?"Invalid JSON Format":"Valid Structured Data"),1)])])])])])]),g.value?(a(),n("div",De,[e("div",Ee,[e("button",{onClick:t[2]||(t[2]=l=>g.value=!1),class:"absolute top-10 right-10 text-slate-300 hover:text-slate-900 transition-colors"},[...t[16]||(t[16]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[18]||(t[18]=e("h2",{class:"text-3xl font-black text-slate-900 mb-8 tracking-tight"},"Import JSON-LD",-1)),e("div",$e,[e("div",Be,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-4"},"Paste code snippet",-1)),L(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>w.value=l),rows:"8",placeholder:'{ "@context": "https://schema.org", ... }',class:"w-full px-8 py-6 rounded-3xl bg-slate-50 border-transparent focus:bg-white focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-standard font-mono text-sm"},null,512),[[P,w.value]])]),e("button",{onClick:z,class:"w-full bg-blue-600 text-white py-5 rounded-[2rem] font-black text-lg shadow-xl shadow-blue-100 hover:scale-105 active:scale-95 transition-standard"}," Populate Form Architecture ")])])])):S("",!0)]),_:1},8,["title"]))}};export{Ve as default};
