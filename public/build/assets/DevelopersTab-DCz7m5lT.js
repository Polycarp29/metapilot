import{r as d,o as P,w as R,b as l,c as n,f as t,x as C,h as S,v as U,F as u,i as x,t as a,j as V,d as A,u as I,g as k,s as D,q as b}from"./app-CMbt6XLd.js";import{C as z,p as N,c as O,d as G,b as H,P as F,L as $,a as W,i as q}from"./chart-BeBNpv4U.js";import{L as Z}from"./index-CWwjsNg_.js";/* empty css            */const J={class:"space-y-10 pb-20"},K={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Q={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},Y=["value"],tt={class:"relative group"},et={class:"bg-slate-900 text-slate-300 p-6 rounded-2xl text-xs font-mono overflow-x-auto border border-slate-800 shadow-inner leading-normal"},st={class:"mt-8 pt-8 border-t border-slate-50 flex items-center justify-between"},at={class:"text-xs font-bold text-slate-700"},ot=["disabled"],lt={class:"space-y-8"},nt={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},rt={class:"h-48 mb-8"},it={class:"grid grid-cols-2 gap-4"},dt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},ct={class:"text-2xl font-black text-slate-900"},pt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},ut={class:"text-2xl font-black text-blue-600"},xt={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},bt={class:"grid grid-cols-2 gap-8"},gt={class:"space-y-3"},ft={class:"flex items-center gap-2"},ht={class:"text-lg"},mt={class:"text-xs font-bold text-slate-700"},vt={class:"text-xs font-black text-slate-400"},kt={key:0,class:"text-[10px] text-slate-400 italic"},_t={class:"space-y-3"},wt={class:"flex items-center gap-2"},yt={key:0,class:"w-3 h-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ct={key:1,class:"w-3 h-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},St={class:"text-[10px] font-bold text-slate-700"},Dt={class:"text-xs font-black text-slate-400"},jt={class:"bg-white rounded-[3rem] border border-slate-100 shadow-premium overflow-hidden"},Lt={class:"overflow-x-auto"},Mt={class:"w-full text-left border-collapse"},Tt={class:"divide-y divide-slate-50"},Bt={class:"py-6 pl-10"},Et={class:"text-xs font-black text-slate-900"},Pt={class:"text-[10px] text-slate-400 font-medium mt-1"},Rt={class:"py-6 whitespace-nowrap"},Ut={class:"flex items-center gap-2"},Vt={class:"text-sm"},At={class:"text-[10px] font-bold text-slate-600 truncate max-w-[80px]"},It={class:"py-6"},zt={class:"flex flex-col"},Nt={class:"text-[10px] font-black text-slate-700"},Ot={class:"text-[9px] text-slate-400 uppercase tracking-tighter"},Gt={class:"py-6"},Ht=["title"],Ft=["title"],$t={class:"py-6 text-xs text-slate-600"},Wt={class:"font-bold"},qt={class:"py-6 pr-10 text-right"},Zt=["title"],Jt={key:1,class:"text-slate-300"},Kt={key:0},ee={__name:"DevelopersTab",props:{organization:Object,properties:Array,propertyId:[Number,String],forecastData:Object},setup(_){z.register(N,O,G,H,F,$,W,q);const g=_,f=d(""),i=d([]),h=d(!1),p=d(!1),m=d(g.propertyId||g.properties?.[0]?.id),c=d(""),v=b(()=>g.organization?.ads_site_token),j=async()=>{h.value=!0;try{const o=await D.get(route("google-ads.pixel-events"));i.value=o.data}catch(o){console.error("Failed to fetch pixel events",o)}finally{h.value=!1}},w=()=>{const o=window.location.origin,e=c.value?` data-campaign="${c.value}"`:"";f.value=`<script src="${o}/cdn/ads-tracker.js" data-token="${v.value}"${e} async><\/script>`},L=async()=>{if(confirm("Regenerating the token will break all existing trackers. Continue?")){p.value=!0;try{await D.post(route("google-ads.regenerate-token")),window.location.reload()}catch(o){console.error("Failed to regenerate token",o)}finally{p.value=!1}}},M=()=>{navigator.clipboard.writeText(f.value),alert("Snippet copied to clipboard!")};P(()=>{w(),j()}),R([m,c,v],w);const T=b(()=>{const o={};i.value.forEach(s=>{const r=new Date(s.created_at).toLocaleDateString();o[r]=(o[r]||0)+1});const e=Object.keys(o).sort((s,r)=>new Date(s)-new Date(r));return{labels:e,datasets:[{label:"Pixel Hits",data:e.map(s=>o[s]),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,borderWidth:3,pointRadius:4,pointBackgroundColor:"#fff"}]}}),y=b(()=>{const o={};return i.value.forEach(e=>{e.country_code&&(o[e.country_code]=(o[e.country_code]||0)+1)}),Object.entries(o).map(([e,s])=>({code:e,count:s})).sort((e,s)=>s.count-e.count).slice(0,5)}),B=b(()=>{const o={Mobile:0,Desktop:0,Tablet:0};return i.value.forEach(e=>{e.device_type&&o[e.device_type]!==void 0&&o[e.device_type]++}),o}),E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f1f5f9"}}}};return(o,e)=>(l(),n("div",J,[e[18]||(e[18]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h2",{class:"text-3xl font-black text-slate-900 tracking-tight"},"Developer Tools"),t("p",{class:"text-slate-500 font-medium mt-1"},"Implement tracking and monitor pixel performance")])],-1)),t("div",K,[t("div",Q,[e[6]||(e[6]=C('<h3 class="text-xl font-black text-slate-900 mb-6 flex items-center gap-3"><span class="p-2 bg-blue-50 text-blue-600 rounded-xl"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></span> CDN Tracker Generator </h3><p class="text-slate-500 text-sm mb-8 leading-relaxed"> Embed this script on your landing pages to track ad-driven traffic directly into MetaPilot. It automatically captures GCLIDs and UTM parameters. </p>',2)),t("div",X,[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2"},"Scope to Property",-1)),S(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),class:"w-full bg-slate-50 border-transparent focus:border-blue-500 focus:ring-0 rounded-xl text-xs font-bold text-slate-700 py-3 shadow-inner"},[(l(!0),n(u,null,x(_.properties,s=>(l(),n("option",{key:s.id,value:s.id},a(s.name),9,Y))),128))],512),[[U,m.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2"},"Optional Campaign Tag",-1)),S(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),placeholder:"e.g. spring_sale_2024",class:"w-full bg-slate-50 border-transparent focus:border-blue-500 focus:ring-0 rounded-xl text-xs font-bold text-slate-700 py-3 px-4 shadow-inner"},null,512),[[V,c.value]])])]),t("div",tt,[t("pre",et,a(f.value),1),t("button",{onClick:M,class:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white p-2 rounded-lg transition-colors border border-white/10",title:"Copy to clipboard"},[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])]),t("div",st,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Organization Site Token",-1)),t("code",at,a(v.value),1)]),t("button",{onClick:L,disabled:p.value,class:"text-xs font-black text-rose-500 uppercase tracking-widest hover:text-rose-700 transition-colors"},a(p.value?"Regenerating...":"Regenerate Token"),9,ot)])]),t("div",lt,[t("div",nt,[e[9]||(e[9]=C('<div class="flex items-center justify-between mb-8"><h3 class="text-xl font-black text-slate-900 flex items-center gap-3"><span class="p-2 bg-emerald-50 text-emerald-600 rounded-xl"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg></span> Pixel Signal Analytics </h3><div class="flex items-center gap-2"><span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span><span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Live Signals</span></div></div>',1)),t("div",rt,[A(I(Z),{data:T.value,options:E},null,8,["data"])]),t("div",it,[t("div",dt,[e[7]||(e[7]=t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Total Hits",-1)),t("p",ct,a(i.value.length),1)]),t("div",pt,[e[8]||(e[8]=t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Active Sessions",-1)),t("p",ut,a(new Set(i.value.map(s=>s.session_id)).size),1)])])]),t("div",xt,[t("div",bt,[t("div",null,[e[10]||(e[10]=t("h4",{class:"text-xs font-black text-slate-400 uppercase tracking-widest mb-4"},"Top Geography",-1)),t("div",gt,[(l(!0),n(u,null,x(y.value,s=>(l(),n("div",{key:s.code,class:"flex items-center justify-between"},[t("div",ft,[t("span",ht,a(s.code==="US"?"üá∫üá∏":s.code==="GB"?"üá¨üáß":s.code==="CA"?"üá®üá¶":"üåç"),1),t("span",mt,a(s.code),1)]),t("span",vt,a(s.count),1)]))),128)),y.value.length===0?(l(),n("div",kt,"Waiting for geo data...")):k("",!0)])]),t("div",null,[e[13]||(e[13]=t("h4",{class:"text-xs font-black text-slate-400 uppercase tracking-widest mb-4"},"Device Usage",-1)),t("div",_t,[(l(!0),n(u,null,x(B.value,(s,r)=>(l(),n("div",{key:r,class:"flex items-center justify-between"},[t("div",wt,[r==="Mobile"?(l(),n("svg",yt,[...e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])):r==="Desktop"?(l(),n("svg",Ct,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])])):k("",!0),t("span",St,a(r),1)]),t("span",Dt,a(s),1)]))),128))])])])])])]),t("div",jt,[e[17]||(e[17]=t("div",{class:"p-10 border-b border-slate-100"},[t("h3",{class:"text-2xl font-black text-slate-900"},"Pixel Event Log"),t("p",{class:"text-slate-500 font-medium mt-1"},"Real-time tracking hits with enriched behavioral metadata")],-1)),t("div",Lt,[t("table",Mt,[e[16]||(e[16]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",{class:"py-6 pl-10 text-xs font-black text-slate-400 uppercase tracking-widest"},"User / Session"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Location"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Device"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Page / Referrer"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Source"),t("th",{class:"py-6 pr-10 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"GCLID")])],-1)),t("tbody",Tt,[(l(!0),n(u,null,x(i.value,s=>(l(),n("tr",{key:s.id,class:"group hover:bg-slate-50/50 transition-colors"},[t("td",Bt,[t("p",Et,"Session: "+a(s.session_id?s.session_id.substring(0,8):"Anon"),1),t("p",Pt,a(new Date(s.created_at).toLocaleString()),1)]),t("td",Rt,[t("div",Ut,[t("span",Vt,a(s.country_code||"üåç"),1),t("span",At,a(s.city||"Unknown"),1)])]),t("td",It,[t("div",zt,[t("span",Nt,a(s.browser)+" on "+a(s.platform),1),t("span",Ot,a(s.screen_resolution||"-"),1)])]),t("td",Gt,[t("p",{class:"text-xs font-bold text-slate-900 truncate max-w-[150px]",title:s.page_url},a(s.page_url.split("/").pop()||"/"),9,Ht),t("p",{class:"text-[10px] text-slate-400 truncate max-w-[150px]",title:s.referrer},a(s.referrer?"via "+new o.URL(s.referrer).hostname:"Direct"),9,Ft)]),t("td",$t,[t("span",Wt,a(s.utm_source||"-"),1),e[14]||(e[14]=t("span",{class:"text-slate-400 mx-1"},"/",-1)),t("span",null,a(s.utm_medium||"-"),1)]),t("td",qt,[s.gclid?(l(),n("span",{key:0,class:"px-2 py-1 bg-amber-50 text-amber-700 text-[10px] font-black rounded-lg border border-amber-100",title:s.gclid},a(s.gclid.substring(0,8))+"... ",9,Zt)):(l(),n("span",Jt,"-"))])]))),128)),i.value.length===0&&!h.value?(l(),n("tr",Kt,[...e[15]||(e[15]=[t("td",{colspan:"6",class:"py-20 text-center"},[t("p",{class:"text-slate-400 font-bold italic"},"No pixel events detected yet.")],-1)])])):k("",!0)])])])])]))}};export{ee as default};
