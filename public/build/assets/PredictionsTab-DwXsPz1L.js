import{o as R,b as s,c as r,f as e,n as b,k as F,t as o,F as d,i as c,x as f,m as k,u as C,p as V,g as E,s as y,r as v,q as g}from"./app-DBBJTU5H.js";import{C as N,R as O,P as G,b as T,i as H,c as W,d as q,a as U,L as Y,B as $,e as J,f as K}from"./index-DLT3ATHB.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const X={class:"space-y-10 animate-in fade-in duration-500 pb-20"},Z={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-6"},ee={class:"flex items-center gap-4"},te=["disabled"],ae={key:0,class:"space-y-8"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},re={key:1,class:"max-w-2xl mx-auto py-20 text-center"},le={key:2,class:"bg-slate-50 p-20 rounded-[4rem] text-center border-2 border-dashed border-slate-200"},oe={key:3,class:"space-y-12"},ie={class:"bg-gradient-to-br from-blue-600 to-indigo-800 rounded-[3rem] p-10 text-white shadow-2xl shadow-blue-600/30 relative overflow-hidden"},ne={class:"relative z-10 flex flex-col md:flex-row gap-10"},de={class:"flex-1"},ce={class:"text-4xl font-black mb-6 tracking-tight leading-tight"},pe={class:"flex items-center gap-8 mt-10 border-t border-white/10 pt-10"},ue={class:"text-[10px] font-black text-blue-200 uppercase tracking-widest"},be={class:"text-2xl font-black mt-1"},fe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ve={class:"flex items-center justify-between mb-8"},ge={class:"w-14 h-14 rounded-2xl flex items-center justify-center text-slate-900 bg-slate-50 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-500"},xe={class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me=["d"],he={class:"text-xl font-black text-slate-900 leading-snug mb-3"},ye={class:"text-slate-500 text-sm font-medium leading-relaxed mb-8"},_e={class:"p-6 bg-slate-50 rounded-2xl mb-8 border border-slate-100"},we={class:"flex flex-wrap gap-4"},ke={class:"text-xs font-black text-slate-700"},Ce={class:"space-y-4"},je={class:"shrink-0 w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-black"},Me={class:"text-xs font-bold text-slate-600 leading-relaxed"},Se={class:"grid grid-cols-1 lg:grid-cols-2 gap-10"},Le={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},Pe={class:"h-64"},ze={key:1,class:"h-full flex items-center justify-center text-slate-300 font-black italic"},Be={class:"grid grid-cols-3 gap-6 mt-10 pt-10 border-t border-slate-50 text-center"},Ie={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},Ae={class:"text-xl font-black text-slate-900"},De={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},Re={class:"h-80 flex items-center justify-center"},Fe={key:1,class:"text-slate-300 font-black"},Ve={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium overflow-hidden relative"},Ee={key:0,class:"space-y-8"},Ne={class:"flex items-center justify-between mb-3 px-2"},Oe={class:"text-sm font-black text-slate-800"},Ge={class:"flex items-center gap-4"},Te={class:"text-sm font-black text-slate-900"},He={class:"h-4 bg-slate-50 rounded-full overflow-hidden border border-slate-100 p-0.5"},We={key:1,class:"text-center py-20 text-slate-300 font-black italic"},qe={__name:"PredictionsTab",props:{propertyId:Number,organization:Object},setup(j){N.register(O,G,T,H,W,q,U,Y,$);const x=j,i=v("loading"),m=v(null),n=v({propensity_scores:{},source_fatigue:{},performance_rankings:[],ad_performance:[],strategic_strategy:{summary:"",recommendations:[],diagnostics:{}}}),_=v(null),M=async()=>{i.value="loading";try{const[l,t]=await Promise.all([y.get(route("analytics.forecasts",{property:x.propertyId})),y.get(route("api.analytics.forecast",{property:x.propertyId}))]),a=l.data;n.value={propensity_scores:a.propensity_scores||{},source_fatigue:a.source_fatigue||{},performance_rankings:a.performance_rankings||[],ad_performance:a.ad_performance||[],strategic_strategy:a.strategic_strategy||{summary:"",recommendations:[],diagnostics:{}}},_.value=t.data;const p=Object.keys(n.value.propensity_scores).length>0||Object.keys(n.value.source_fatigue).length>0||n.value.performance_rankings.length>0||!!n.value.strategic_strategy.summary;i.value=p?"ready":"empty"}catch(l){console.error("Failed to fetch forecasts:",l),i.value="error"}},w=async()=>{i.value="running",m.value=null;try{const t=(await y.post(route("analytics.refresh-predictions",{property:x.propertyId}))).data;if(t.error){m.value=t.error,i.value="empty";return}n.value={propensity_scores:t.propensity_scores||{},source_fatigue:t.source_fatigue||{},performance_rankings:t.performance_rankings||[],ad_performance:t.ad_performance||[],strategic_strategy:t.strategic_strategy||{summary:"",recommendations:[],diagnostics:{}}},i.value="ready"}catch(l){m.value=l.response?.data?.error||"Internal error. Check that the Python service is running.",i.value="empty"}};R(M);const S=g(()=>Object.keys(n.value.propensity_scores).length>0),L={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",padding:10,cornerRadius:8,callbacks:{label:l=>` ${(l.raw*100).toFixed(1)}% probability`}}},scales:{r:{angleLines:{color:"rgba(0,0,0,0.08)"},grid:{color:"rgba(0,0,0,0.06)"},pointLabels:{font:{size:11,weight:"bold"},color:"#475569"},ticks:{display:!1},suggestedMin:0,suggestedMax:1}}},P=g(()=>n.value.sessions||{}),z=g(()=>Object.keys(P.value).length>0),B=g(()=>{const l=n.value.sessions||{},t=["Now","30 Days","90 Days","180 Days"],a=[_.value?.users?.[0]?.value||0,l["30d"]?.predicted||0,l["90d"]?.predicted||0,l["180d"]?.predicted||0];return{labels:t,datasets:[{label:"Predicted Traffic",data:a,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:4,fill:!0,tension:.4,pointRadius:6,pointBackgroundColor:"#fff",pointBorderWidth:3}]}}),I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{grid:{color:"rgba(0,0,0,0.04)"}},x:{grid:{display:!1}}}},A=l=>{switch(l?.toLowerCase()){case"critical":return"bg-rose-50 text-rose-700 border-rose-200";case"high":return"bg-amber-50 text-amber-700 border-amber-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}},D=l=>{switch(l){case"ads":return"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z";case"seo":return"M7 16V4m0 12l-4-4m4 4l4-4m6 0v12m0-12l-4 4m4-4l4 4";default:return"M13 10V3L4 14h7v7l9-11h-7z"}};return(l,t)=>(s(),r("div",X,[e("div",Z,[t[1]||(t[1]=e("div",null,[e("h2",{class:"text-3xl font-black text-slate-900 tracking-tight"},"Strategic Intelligence"),e("p",{class:"text-slate-500 font-medium mt-1"},"Multi-source correlation & predictive strategy")],-1)),e("div",ee,[e("button",{onClick:w,disabled:i.value==="running"||i.value==="loading",class:"group flex items-center gap-3 px-6 py-3 bg-slate-900 hover:bg-black disabled:opacity-50 text-white text-xs font-black uppercase tracking-widest rounded-2xl transition-all shadow-2xl shadow-slate-900/20 active:scale-95"},[(s(),r("svg",{class:b(["w-5 h-5 transition-transform group-hover:rotate-180",{"animate-spin":i.value==="running"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[0]||(t[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),F(" "+o(i.value==="running"?"Analyzing…":"Regenerate Strategy"),1)],8,te)])]),i.value==="loading"?(s(),r("div",ae,[t[2]||(t[2]=e("div",{class:"h-40 bg-slate-50 rounded-[3rem] animate-pulse"},null,-1)),e("div",se,[(s(),r(d,null,c(3,a=>e("div",{key:a,class:"h-64 bg-slate-50 rounded-3xl animate-pulse"})),64))])])):i.value==="running"?(s(),r("div",re,[...t[3]||(t[3]=[f('<div class="relative w-32 h-32 mx-auto mb-10" data-v-7a65fb31><div class="absolute inset-0 rounded-full border-4 border-blue-100 animate-ping" data-v-7a65fb31></div><div class="relative w-full h-full bg-blue-600 rounded-full flex items-center justify-center text-white shadow-2xl shadow-blue-600/40" data-v-7a65fb31><svg class="w-12 h-12 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7a65fb31><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-7a65fb31></path></svg></div></div><h3 class="text-3xl font-black text-slate-900 mb-4" data-v-7a65fb31>Processing Deep Intelligence</h3><p class="text-slate-500 font-medium leading-relaxed" data-v-7a65fb31> Correlating GA4 session data with GSC search intent and Ad performance... <br data-v-7a65fb31><span class="text-blue-600 font-black" data-v-7a65fb31>Generating 180-day forecasts.</span></p>',3)])])):i.value==="empty"?(s(),r("div",le,[t[4]||(t[4]=f('<div class="w-20 h-20 bg-white rounded-3xl shadow-sm border border-slate-100 flex items-center justify-center mx-auto mb-8 text-slate-400" data-v-7a65fb31><svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7a65fb31><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-7a65fb31></path></svg></div><h3 class="text-2xl font-black text-slate-900 mb-4" data-v-7a65fb31>No Strategy Data Yet</h3><p class="text-slate-500 max-w-sm mx-auto mb-10" data-v-7a65fb31>Generate your first strategic analysis to see prioritized growth recommendations.</p>',3)),e("button",{onClick:w,class:"px-8 py-4 bg-blue-600 text-white font-black rounded-2xl shadow-xl shadow-blue-600/20"},"Analyze Now")])):i.value==="ready"?(s(),r("div",oe,[e("div",ie,[t[7]||(t[7]=e("div",{class:"absolute top-0 right-0 p-10 opacity-10"},[e("svg",{class:"w-40 h-40",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})])],-1)),e("div",ne,[e("div",de,[t[5]||(t[5]=e("div",{class:"flex items-center gap-3 mb-6"},[e("span",{class:"px-4 py-1.5 bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/20"},"AI Briefing"),e("span",{class:"text-blue-100 text-[10px] font-black uppercase tracking-widest"},"Property Health: Excellent")],-1)),e("h3",ce,o(n.value.strategic_strategy?.summary||"Performance is stable across all primary channels."),1),e("div",pe,[(s(!0),r(d,null,c(n.value.strategic_strategy?.diagnostics,(a,p)=>(s(),r("div",{key:p},[e("p",ue,o(p.replace("_"," ")),1),e("p",be,o(a),1)]))),128))])]),t[6]||(t[6]=f('<div class="w-full md:w-80 bg-white/10 backdrop-blur-xl border border-white/10 rounded-[2.5rem] p-8" data-v-7a65fb31><p class="text-[10px] font-black text-blue-200 uppercase tracking-widest mb-6" data-v-7a65fb31>Strategy Potential</p><div class="space-y-6" data-v-7a65fb31><div data-v-7a65fb31><div class="flex justify-between text-xs font-black mb-2" data-v-7a65fb31><span data-v-7a65fb31>Conversion Lift</span><span data-v-7a65fb31>+18%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-7a65fb31><div class="h-full bg-emerald-400 w-[70%]" data-v-7a65fb31></div></div></div><div data-v-7a65fb31><div class="flex justify-between text-xs font-black mb-2" data-v-7a65fb31><span data-v-7a65fb31>SEO Visibility</span><span data-v-7a65fb31>+24%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-7a65fb31><div class="h-full bg-blue-300 w-[85%]" data-v-7a65fb31></div></div></div><div data-v-7a65fb31><div class="flex justify-between text-xs font-black mb-2" data-v-7a65fb31><span data-v-7a65fb31>Ads Optimization</span><span data-v-7a65fb31>+12%</span></div><div class="h-1.5 bg-white/10 rounded-full overflow-hidden" data-v-7a65fb31><div class="h-full bg-amber-400 w-[40%]" data-v-7a65fb31></div></div></div></div></div>',1))])]),e("div",null,[t[11]||(t[11]=e("h4",{class:"text-xl font-black text-slate-900 mb-8 px-2"},"Growth Strategy Map",-1)),e("div",fe,[(s(!0),r(d,null,c(n.value.strategic_strategy?.recommendations,(a,p)=>(s(),r("div",{key:p,class:"group bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium hover:shadow-2xl transition-all duration-500 hover:-translate-y-2"},[e("div",ve,[e("div",ge,[(s(),r("svg",xe,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:D(a.type)},null,8,me)]))]),e("span",{class:b(["px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest border",A(a.priority)])},o(a.priority),3)]),e("h5",he,o(a.title),1),e("p",ye,o(a.rationale),1),e("div",_e,[t[9]||(t[9]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4"},"Impact Forecast",-1)),e("div",we,[(s(!0),r(d,null,c(a.expected_impact,(h,u)=>(s(),r("div",{key:u,class:"flex items-center gap-2"},[t[8]||(t[8]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-emerald-500"},null,-1)),e("span",ke,o(u.replace("_"," "))+": "+o(h),1)]))),128))])]),e("div",Ce,[t[10]||(t[10]=e("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest"},"Next Steps",-1)),(s(!0),r(d,null,c(a.actions,(h,u)=>(s(),r("div",{key:u,class:"flex gap-4"},[e("div",je,o(u+1),1),e("p",Me,o(h.description),1)]))),128))])]))),128))])]),e("div",Se,[e("div",Le,[t[12]||(t[12]=f('<div class="flex items-center justify-between mb-10" data-v-7a65fb31><div data-v-7a65fb31><h3 class="text-xl font-black text-slate-900" data-v-7a65fb31>180-Day Traffic Forecast</h3><p class="text-xs text-slate-400 font-medium mt-1" data-v-7a65fb31>AI modeling based on seasonal search trends</p></div><div class="flex gap-2" data-v-7a65fb31><span class="px-3 py-1 bg-blue-50 text-blue-600 text-[10px] font-black rounded-lg border border-blue-100" data-v-7a65fb31>Prophet Model</span></div></div>',1)),e("div",Pe,[z.value?(s(),k(C(J),{key:0,data:B.value,options:I},null,8,["data"])):(s(),r("div",ze,"Generating projection..."))]),e("div",Be,[(s(),r(d,null,c(["30d","90d","180d"],a=>e("div",{key:a},[e("p",Ie,o(a)+" Prediction",1),e("p",Ae,o((n.value.value.sessions||{})[a]?.predicted||"—"),1)])),64))])]),e("div",De,[t[13]||(t[13]=e("h3",{class:"text-xl font-black text-slate-900 mb-2"},"Intent Propensity",-1)),t[14]||(t[14]=e("p",{class:"text-xs text-slate-400 font-medium mb-10"},"Channel conversion probability for fresh leads",-1)),e("div",Re,[S.value?(s(),k(C(K),{key:0,data:l.propensityChartData,options:L},null,8,["data"])):(s(),r("p",Fe,"Waiting for ML data..."))])])]),e("div",Ve,[t[15]||(t[15]=e("div",{class:"flex items-center justify-between mb-8"},[e("h3",{class:"text-xl font-black text-slate-900"},"Global Channel Efficiency"),e("span",{class:"text-xs font-bold text-slate-400"},"Total reach: 100% normalized")],-1)),n.value.performance_rankings.length?(s(),r("div",Ee,[(s(!0),r(d,null,c(n.value.performance_rankings,a=>(s(),r("div",{key:a.channel,class:"group"},[e("div",Ne,[e("span",Oe,o(a.channel),1),e("div",Ge,[e("span",{class:b(["text-[10px] font-black uppercase tracking-widest",a.efficiency_index>=.7?"text-emerald-500":"text-slate-400"])},o(a.efficiency_index>=.7?"Excellent":a.efficiency_index>=.4?"Stable":"Underperforming"),3),e("span",Te,o((a.propensity*100).toFixed(0))+"%",1)])]),e("div",He,[e("div",{class:b(["h-full rounded-full transition-all duration-1000",a.efficiency_index>=.7?"bg-blue-600":a.efficiency_index>=.4?"bg-indigo-400":"bg-slate-300"]),style:V({width:Math.min(a.propensity*100,100)+"%"})},null,6)])]))),128))])):(s(),r("p",We,"Awaiting multi-channel analysis..."))])])):E("",!0)]))}},Ke=Q(qe,[["__scopeId","data-v-7a65fb31"]]);export{Ke as default};
