import{r as n,o as M,w as P,b as l,c as r,f as t,x as k,h,v as I,F as w,i as y,t as o,j as R,d as B,u as E,g as N,s as _,q as C}from"./app-km1dl1_e.js";import{C as V,p as A,c as O,d as U,b as z,P as F,L as $,a as G,i as H}from"./chart-BeBNpv4U.js";import{L as q}from"./index-SioRsS-h.js";/* empty css            */const W={class:"space-y-10 pb-20"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},J={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},Q=["value"],X={class:"relative group"},Y={class:"bg-slate-900 text-slate-300 p-6 rounded-2xl text-xs font-mono overflow-x-auto border border-slate-800 shadow-inner leading-normal"},tt={class:"mt-8 pt-8 border-t border-slate-50 flex items-center justify-between"},et={class:"text-xs font-bold text-slate-700"},st=["disabled"],at={class:"bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium"},ot={class:"h-48 mb-8"},lt={class:"grid grid-cols-2 gap-4"},rt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},nt={class:"text-2xl font-black text-slate-900"},it={class:"bg-white rounded-[3rem] border border-slate-100 shadow-premium overflow-hidden"},dt={class:"overflow-x-auto"},ct={class:"w-full text-left border-collapse"},pt={class:"divide-y divide-slate-50"},ut={class:"py-6 pl-10 text-sm font-medium text-slate-500 whitespace-nowrap"},gt=["title"],xt={class:"py-6 text-sm text-slate-600"},bt={class:"py-6 text-sm text-slate-600"},mt={class:"py-6 pr-10 text-right"},ft=["title"],vt={key:1,class:"text-slate-300"},kt={key:0},Ct={__name:"DevelopersTab",props:{organization:Object,properties:Array,propertyId:[Number,String],forecastData:Object},setup(f){V.register(A,O,U,z,F,$,G,H);const u=f,g=n(""),i=n([]),x=n(!1),c=n(!1),b=n(u.propertyId||u.properties?.[0]?.id),d=n(""),m=C(()=>u.organization?.ads_site_token),S=async()=>{x.value=!0;try{const a=await _.get(route("google-ads.pixel-events"));i.value=a.data}catch(a){console.error("Failed to fetch pixel events",a)}finally{x.value=!1}},v=()=>{const a=window.location.origin,e=d.value?` data-campaign="${d.value}"`:"";g.value=`<script src="${a}/cdn/ads-tracker.js" data-token="${m.value}"${e} async><\/script>`},D=async()=>{if(confirm("Regenerating the token will break all existing trackers. Continue?")){c.value=!0;try{await _.post(route("google-ads.regenerate-token")),window.location.reload()}catch(a){console.error("Failed to regenerate token",a)}finally{c.value=!1}}},L=()=>{navigator.clipboard.writeText(g.value),alert("Snippet copied to clipboard!")};M(()=>{v(),S()}),P([b,d,m],v);const T=C(()=>{const a={};i.value.forEach(s=>{const p=new Date(s.created_at).toLocaleDateString();a[p]=(a[p]||0)+1});const e=Object.keys(a).sort((s,p)=>new Date(s)-new Date(p));return{labels:e,datasets:[{label:"Pixel Hits",data:e.map(s=>a[s]),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.4,borderWidth:3,pointRadius:4,pointBackgroundColor:"#fff"}]}}),j={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f1f5f9"}}}};return(a,e)=>(l(),r("div",W,[e[13]||(e[13]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h2",{class:"text-3xl font-black text-slate-900 tracking-tight"},"Developer Tools"),t("p",{class:"text-slate-500 font-medium mt-1"},"Implement tracking and monitor pixel performance")])],-1)),t("div",Z,[t("div",J,[e[6]||(e[6]=k('<h3 class="text-xl font-black text-slate-900 mb-6 flex items-center gap-3"><span class="p-2 bg-blue-50 text-blue-600 rounded-xl"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg></span> CDN Tracker Generator </h3><p class="text-slate-500 text-sm mb-8 leading-relaxed"> Embed this script on your landing pages to track ad-driven traffic directly into MetaPilot. It automatically captures GCLIDs and UTM parameters. </p>',2)),t("div",K,[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2"},"Scope to Property",-1)),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),class:"w-full bg-slate-50 border-transparent focus:border-blue-500 focus:ring-0 rounded-xl text-xs font-bold text-slate-700 py-3 shadow-inner"},[(l(!0),r(w,null,y(f.properties,s=>(l(),r("option",{key:s.id,value:s.id},o(s.name),9,Q))),128))],512),[[I,b.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2"},"Optional Campaign Tag",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),placeholder:"e.g. spring_sale_2024",class:"w-full bg-slate-50 border-transparent focus:border-blue-500 focus:ring-0 rounded-xl text-xs font-bold text-slate-700 py-3 px-4 shadow-inner"},null,512),[[R,d.value]])])]),t("div",X,[t("pre",Y,o(g.value),1),t("button",{onClick:L,class:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white p-2 rounded-lg transition-colors border border-white/10",title:"Copy to clipboard"},[...e[4]||(e[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])]),t("div",tt,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Organization Site Token",-1)),t("code",et,o(m.value),1)]),t("button",{onClick:D,disabled:c.value,class:"text-xs font-black text-rose-500 uppercase tracking-widest hover:text-rose-700 transition-colors"},o(c.value?"Regenerating...":"Regenerate Token"),9,st)])]),t("div",at,[e[9]||(e[9]=k('<div class="flex items-center justify-between mb-8"><h3 class="text-xl font-black text-slate-900 flex items-center gap-3"><span class="p-2 bg-emerald-50 text-emerald-600 rounded-xl"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg></span> Pixel Signal Analytics </h3><div class="flex items-center gap-2"><span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span><span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Live Signals</span></div></div>',1)),t("div",ot,[B(E(q),{data:T.value,options:j},null,8,["data"])]),t("div",lt,[t("div",rt,[e[7]||(e[7]=t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Total Signals",-1)),t("p",nt,o(i.value.length),1)]),e[8]||(e[8]=t("div",{class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},[t("p",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1"},"Correlation Accuracy"),t("p",{class:"text-2xl font-black text-emerald-600"},"High")],-1))])])]),t("div",it,[e[12]||(e[12]=t("div",{class:"p-10 border-b border-slate-100"},[t("h3",{class:"text-2xl font-black text-slate-900"},"Pixel Event Log"),t("p",{class:"text-slate-500 font-medium mt-1"},"Real-time tracking hits for debugging")],-1)),t("div",dt,[t("table",ct,[e[11]||(e[11]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",{class:"py-6 pl-10 text-xs font-black text-slate-400 uppercase tracking-widest"},"Timestamp"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Page URL"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Source/Medium"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest"},"Campaign"),t("th",{class:"py-6 pr-10 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"GCLID")])],-1)),t("tbody",pt,[(l(!0),r(w,null,y(i.value,s=>(l(),r("tr",{key:s.id,class:"group hover:bg-slate-50/50 transition-colors"},[t("td",ut,o(new Date(s.created_at).toLocaleString()),1),t("td",{class:"py-6 text-sm font-bold text-slate-900 max-w-xs truncate",title:s.page_url},o(s.page_url),9,gt),t("td",xt,o(s.utm_source||"-")+" / "+o(s.utm_medium||"-"),1),t("td",bt,o(s.utm_campaign||"-"),1),t("td",mt,[s.gclid?(l(),r("span",{key:0,class:"px-2 py-1 bg-amber-50 text-amber-700 text-[10px] font-black rounded-lg border border-amber-100",title:s.gclid},o(s.gclid.substring(0,8))+"... ",9,ft)):(l(),r("span",vt,"-"))])]))),128)),i.value.length===0&&!x.value?(l(),r("tr",kt,[...e[10]||(e[10]=[t("td",{colspan:"5",class:"py-20 text-center"},[t("p",{class:"text-slate-400 font-bold italic"},"No pixel events detected yet.")],-1)])])):N("",!0)])])])])]))}};export{Ct as default};
