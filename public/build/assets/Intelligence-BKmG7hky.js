import{o as $,b as r,m as F,e as p,f as t,d as x,u as b,l as y,k as i,h as C,j as H,c as a,F as M,i as B,t as o,v as R,n as v,g as h,T as K,z as O,s as w,K as P,r as g}from"./app-DkFfCOcp.js";import{_ as U}from"./lodash-QhF_jgTp.js";import{_ as E}from"./AppLayout-CNmzRpw0.js";import G from"./Sparkline-BcnqRSwA.js";/* empty css            */import"./Toaster-Byno6BuZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./chart-BeBNpv4U.js";const X={class:"max-w-[1440px] mx-auto pb-20"},q={class:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8"},J={class:"flex items-center bg-slate-100 p-1 rounded-xl border border-slate-200/60 shadow-inner w-fit"},Q={class:"bg-white rounded-3xl p-6 border border-slate-100 shadow-sm mb-8 flex flex-wrap items-center gap-6"},W={class:"flex-1 min-w-[300px] relative"},Y={class:"flex items-center gap-3"},Z=["value"],ee=["fill"],te={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},le={class:"flex items-center justify-between mb-4"},oe={class:"flex items-center gap-2"},re={key:0,class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},ae={key:0,class:"mb-4"},ne=["onClick"],ie=["fill"],de={class:"text-xl font-black text-slate-900 mb-4 truncate group-hover:text-blue-600 transition-colors"},ue={class:"h-16 mb-6 w-full opacity-60 group-hover:opacity-100 transition-opacity"},ce={class:"mt-auto flex items-center justify-between pt-4 border-t border-slate-50"},pe=["onClick"],xe={key:2,class:"text-center py-24 bg-slate-50 rounded-[40px] border-2 border-dashed border-slate-200"},be={class:"bg-white rounded-[3rem] p-10 w-full max-w-2xl shadow-2xl border border-slate-100 overflow-hidden relative"},ve={class:"flex items-center justify-between mb-8 pr-10"},ge={class:"text-3xl font-black text-slate-900"},me={class:"grid grid-cols-3 gap-6 mb-8"},fe={class:"bg-slate-50 p-6 rounded-3xl"},he={class:"text-3xl font-black text-slate-900"},ke={class:"bg-slate-50 p-6 rounded-3xl"},ye={class:"text-3xl font-black text-slate-900"},we={class:"bg-slate-50 p-6 rounded-3xl"},_e={class:"text-3xl font-black text-slate-900"},Ce=["disabled"],Me={key:0,class:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Be={key:0,class:"mt-8 p-6 bg-emerald-50 rounded-3xl border border-emerald-100 animate-in fade-in slide-in-from-bottom-2"},je={class:"text-emerald-800 font-medium leading-relaxed"},ze={class:"uppercase"},Ne={__name:"Intelligence",props:{organization:Object,industries:Array},setup(j){const z=j,k=g([]),_=g(!1),m=g(!1),c=g(null),n=g(null),d=g(!1),u=P({search:"",niche:"",status:"",region:""}),f=async()=>{_.value=!0;try{const l=d.value?"api.ki.bookmarks":"api.ki.index",e=await w.get(route(l),{params:u,headers:{"X-Organization-Id":z.organization.id}});d.value?k.value=e.data.filter(s=>s.intelligence).map(s=>({...s.intelligence,is_bookmarked:!0,bookmark_id:s.id})):k.value=e.data.data}catch(l){console.error(l)}finally{_.value=!1}},V=U.debounce(f,500),A=l=>({rising:"bg-emerald-100 text-emerald-600",stable:"bg-blue-100 text-blue-600",decaying:"bg-rose-100 text-rose-600",dormant:"bg-slate-100 text-slate-600",resurgent:"bg-amber-100 text-amber-600"})[l]||"bg-slate-100 text-slate-500",S=l=>({rising:"#10b981",stable:"#3b82f6",decaying:"#f43f5e",dormant:"#94a3b8",resurgent:"#f59e0b"})[l]||"#3b82f6",D=l=>{n.value=l,c.value=null},I=()=>{d.value=!d.value,f()},T=async l=>{try{l.is_bookmarked?(await w.delete(route("api.ki.bookmark.destroy",l.id)),l.is_bookmarked=!1):(await w.post(route("api.ki.bookmark",l.id),{organization_id:z.organization.id,use_case:"research"}),l.is_bookmarked=!0)}catch(e){console.error(e)}},L=async l=>{m.value=!0;try{const e=await w.post(route("api.ki.predict-decay",l.id));c.value=e.data.ml_result,l.decay_status=e.data.ml_result.decay_status,l.trend_velocity=e.data.ml_result.velocity,l.relevance_score=e.data.ml_result.resurgence_probability*100}catch(e){console.error(e)}finally{m.value=!1}};return $(f),(l,e)=>(r(),F(E,{title:"Keyword Intelligence"},{default:p(()=>[t("div",X,[t("div",q,[e[12]||(e[12]=t("div",null,[t("h1",{class:"text-3xl font-extrabold text-slate-900 tracking-tight mb-2"},"Keyword Intelligence"),t("p",{class:"text-slate-500 font-medium"},"Canonical knowledge base of trending topics with decay & resurgence forecasting.")],-1)),t("div",J,[x(b(y),{href:l.route("keywords.trending"),class:"px-3 py-2 rounded-lg text-xs font-bold text-slate-500 hover:text-slate-700 hover:bg-slate-200/50 transition-all duration-300 flex items-center gap-1.5"},{default:p(()=>[...e[7]||(e[7]=[t("svg",{class:"w-3.5 h-3.5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.5",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),t("span",{class:"hidden sm:inline"},"Back",-1)])]),_:1},8,["href"]),e[10]||(e[10]=t("div",{class:"w-px h-4 bg-slate-200 mx-1"},null,-1)),x(b(y),{href:l.route("keywords.trending"),class:"px-4 py-2 rounded-lg text-xs font-bold text-slate-500 hover:text-slate-700 hover:bg-slate-200/50 transition-all duration-300 flex items-center gap-2"},{default:p(()=>[...e[8]||(e[8]=[t("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1),i(" Trends ",-1)])]),_:1},8,["href"]),e[11]||(e[11]=t("button",{class:"px-4 py-2 rounded-lg text-xs font-bold bg-white text-blue-600 shadow-sm transition-all duration-300 flex items-center gap-2"},[t("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),i(" Intelligence ")],-1)),x(b(y),{href:l.route("keywords.research"),class:"px-4 py-2 rounded-lg text-xs font-bold text-slate-500 hover:text-slate-700 hover:bg-slate-200/50 transition-all duration-300 flex items-center gap-2"},{default:p(()=>[...e[9]||(e[9]=[t("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),i(" Research ",-1)])]),_:1},8,["href"])])]),t("div",Q,[t("div",W,[C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>u.search=s),type:"text",placeholder:"Search keywords...",class:"w-full pl-12 pr-4 py-3 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-blue-500/20 font-medium text-slate-700 placeholder:text-slate-400 transition-all",onInput:e[1]||(e[1]=(...s)=>b(V)&&b(V)(...s))},null,544),[[H,u.search]]),e[13]||(e[13]=t("svg",{class:"w-5 h-5 text-slate-400 absolute left-4 top-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",Y,[C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.niche=s),onChange:f,class:"bg-slate-50 border-none rounded-2xl px-4 py-3 text-sm font-bold text-slate-600 focus:ring-2 focus:ring-blue-500/20"},[e[14]||(e[14]=t("option",{value:""},"All Niches",-1)),(r(!0),a(M,null,B(j.industries,s=>(r(),a("option",{key:s.slug,value:s.slug},o(s.name),9,Z))),128))],544),[[R,u.niche]]),C(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.status=s),onChange:f,class:"bg-slate-50 border-none rounded-2xl px-4 py-3 text-sm font-bold text-slate-600 focus:ring-2 focus:ring-blue-500/20"},[...e[15]||(e[15]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"rising"},"Rising",-1),t("option",{value:"stable"},"Stable",-1),t("option",{value:"decaying"},"Decaying",-1),t("option",{value:"dormant"},"Dormant",-1),t("option",{value:"resurgent"},"Resurgent",-1)])],544),[[R,u.status]]),t("button",{onClick:I,class:v(["px-4 py-3 rounded-2xl text-sm font-bold flex items-center gap-2 transition-all",d.value?"bg-amber-100 text-amber-700":"bg-slate-50 text-slate-600 hover:bg-slate-100"])},[(r(),a("svg",{class:"w-4 h-4",fill:d.value?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[16]||(e[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.921-.755 1.688-1.54 1.118l-3.976-2.888a1 1 0 00-1.175 0l-3.976 2.888c-.784.57-1.838-.197-1.539-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],8,ee)),i(" "+o(d.value?"My Bookmarks":"Show Bookmarks"),1)],2)])]),_.value?(r(),a("div",te,[(r(),a(M,null,B(12,s=>t("div",{key:s,class:"h-64 bg-slate-100 animate-pulse rounded-3xl"})),64))])):k.value.length>0?(r(),a("div",se,[(r(!0),a(M,null,B(k.value,s=>(r(),a("div",{key:s.id,class:"group bg-white rounded-3xl border border-slate-100 p-6 hover:shadow-2xl hover:shadow-blue-500/5 transition-all duration-300 relative overflow-hidden flex flex-col"},[t("div",le,[t("div",oe,[t("span",{class:v(["px-2.5 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider",A(s.decay_status)])},o(s.decay_status),3),s.category?(r(),a("span",re,o(s.category),1)):h("",!0)]),s.relevance_score?(r(),a("div",ae,[t("div",{class:v(["inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider shadow-sm border",s.relevance_score>=80?"bg-purple-50 text-purple-700 border-purple-100":s.relevance_score>=50?"bg-blue-50 text-blue-700 border-blue-100":"bg-slate-50 text-slate-500 border-slate-100"])},[e[17]||(e[17]=t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z","clip-rule":"evenodd"})],-1)),i(" "+o(s.relevance_score>=80?"Strategic priority":s.relevance_score>=50?"High Relevance":"Medium Relevance"),1)],2)])):h("",!0),t("button",{onClick:N=>T(s),class:v(["text-slate-300 hover:text-amber-500 transition-colors",{"text-amber-500":s.is_bookmarked}])},[(r(),a("svg",{class:"w-5 h-5",fill:s.is_bookmarked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.921-.755 1.688-1.54 1.118l-3.976-2.888a1 1 0 00-1.175 0l-3.976 2.888c-.784.57-1.838-.197-1.539-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)])],8,ie))],10,ne)]),t("h3",de,o(s.keyword),1),t("div",ue,[x(G,{data:s.trend_history,color:S(s.decay_status)},null,8,["data","color"])]),t("div",ce,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-[10px] uppercase font-bold text-slate-400 mb-0.5"},"Velocity",-1)),t("span",{class:v(["text-lg font-black",s.trend_velocity>=0?"text-emerald-500":"text-rose-500"])},o(s.trend_velocity>=0?"+":"")+o(Math.round(s.trend_velocity))+"% ",3)]),t("button",{onClick:N=>D(s),class:"text-blue-600 font-bold text-sm hover:underline flex items-center gap-1"},[...e[20]||(e[20]=[i(" Analyze ",-1),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,pe)])]))),128))])):(r(),a("div",xe,[e[22]||(e[22]=t("div",{class:"w-20 h-20 bg-white rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-sm"},[t("svg",{class:"w-10 h-10 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})])],-1)),e[23]||(e[23]=t("h3",{class:"text-xl font-bold text-slate-900 mb-2"},"No Intelligence Available",-1)),e[24]||(e[24]=t("p",{class:"text-slate-500 max-w-sm mx-auto"},"Discovery jobs will populate this canonical knowledge base automatically.",-1)),x(b(y),{href:l.route("keywords.trending"),class:"mt-6 inline-block text-blue-600 font-bold hover:underline"},{default:p(()=>[...e[21]||(e[21]=[i("Run a Discovery Scan â†’",-1)])]),_:1},8,["href"])]))]),x(K,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[n.value?(r(),a("div",{key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md",onClick:e[6]||(e[6]=O(s=>n.value=null,["self"]))},[t("div",be,[t("button",{onClick:e[4]||(e[4]=s=>n.value=null),class:"absolute top-8 right-8 text-slate-400 hover:text-slate-900 transition-colors"},[...e[25]||(e[25]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t("div",ve,[t("h2",ge,o(n.value.keyword),1),t("span",{class:v([A(n.value.decay_status),"px-4 py-1.5 rounded-xl text-xs font-black uppercase tracking-widest"])},o(n.value.decay_status),3)]),t("div",me,[t("div",fe,[e[26]||(e[26]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-2"},"Trend Velocity",-1)),t("p",he,o(n.value.trend_velocity)+"%",1)]),t("div",ke,[e[27]||(e[27]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-2"},"Global Score",-1)),t("p",ye,o(Math.round(n.value.global_score)),1)]),t("div",we,[e[28]||(e[28]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-2"},"ML Relevance",-1)),t("p",_e,o(n.value.relevance_score?Math.round(n.value.relevance_score)+"%":"TBD"),1)])]),t("button",{onClick:e[5]||(e[5]=s=>L(n.value)),disabled:m.value,class:"w-full py-4 bg-blue-600 text-white rounded-2xl font-black text-lg shadow-xl shadow-blue-500/20 hover:bg-blue-700 transition-all flex items-center justify-center gap-3 disabled:opacity-50"},[m.value?(r(),a("svg",Me,[...e[29]||(e[29]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):h("",!0),i(" "+o(m.value?"Running ML Forecast...":"Run Precision Decay Forecast"),1)],8,Ce),c.value?(r(),a("div",Be,[e[34]||(e[34]=t("div",{class:"flex items-center gap-3 mb-4"},[t("div",{class:"w-10 h-10 bg-emerald-500 text-white rounded-xl flex items-center justify-center font-black"},"AI"),t("h4",{class:"font-black text-emerald-900 text-lg"},"Resurgence Prediction")],-1)),t("p",je,[e[30]||(e[30]=i(" Trend is currently ",-1)),t("strong",ze,o(c.value.decay_status),1),e[31]||(e[31]=i(" with a forecast value of ",-1)),t("strong",null,o(c.value.forecast_30d),1),e[32]||(e[32]=i(" in 30 days. Probability of resurgence: ",-1)),t("strong",null,o((c.value.resurgence_probability*100).toFixed(1))+"%",1),e[33]||(e[33]=i(". ",-1))])])):h("",!0)])])):h("",!0)]),_:1})]),_:1}))}};export{Ne as default};
