import{s as u,y as le,o as a,c as oe,w as H,a as e,d as U,u as ae,i as ne,t as p,b as O,e as n,f as g,F as $,r as P,n as E,h as V,v as W,m as ie,N as de,z as ce,x as ue}from"./app-ClL56fl0.js";import{u as pe,_ as xe}from"./AppLayout-BhoGwI2k.js";import he from"./FieldItem-CAthF8yb.js";/* empty css            */const fe={class:"space-y-8"},be={class:"glass sticky top-[80px] z-30 -mx-6 px-6 py-6 border-b border-slate-200/50 flex flex-col md:flex-row justify-between items-center gap-6 mb-10 shadow-sm"},ve={class:"flex items-center gap-6"},me={class:"flex items-center gap-3 mb-1"},ge={class:"text-3xl font-extrabold text-slate-900 tracking-tight"},we={class:"px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[10px] font-black uppercase tracking-widest border border-blue-100"},ke={class:"text-sm text-slate-400 font-medium tracking-tight truncate max-w-sm"},ye={class:"flex items-center gap-4 w-full md:w-auto"},_e=["href"],Ce=["disabled"],je={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},Se={class:"grid grid-cols-1 xl:grid-cols-2 gap-12 items-start"},Me={class:"space-y-8 pb-32"},Ne={class:"space-y-6"},Fe={key:0,class:"flex flex-col items-center justify-center py-32 bg-white/50 border-2 border-dashed border-slate-200 rounded-[2.5rem] text-center px-10"},Oe={class:"sticky top-[200px] space-y-8"},$e={class:"bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-800 overflow-hidden flex flex-col h-[75vh]"},Pe={class:"px-8 py-6 bg-black/40 border-b border-white/5 flex justify-between items-center backdrop-blur-md"},Ee={class:"flex items-center gap-3"},Je={class:"flex-grow p-8 font-mono text-[13px] overflow-auto custom-scrollbar-dark selection:bg-blue-500/30 relative"},Be={key:1,class:"bg-transparent"},De={class:"grid gap-1"},Te={class:"text-slate-700 w-8 text-right select-none pr-4 border-r border-slate-800"},Ve=["innerHTML"],Ae={class:"px-8 py-5 bg-black/40 border-t border-white/5 flex flex-col gap-4"},Le={class:"flex items-center justify-between"},Ie={class:"flex gap-4"},Re={class:"flex flex-col"},ze={class:"flex items-center gap-4"},He={key:0,class:"w-4 h-4 border-2 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"},Ue={class:"flex items-center gap-2 group cursor-help"},We={class:"text-[11px] font-bold text-slate-400 group-hover:text-emerald-400 transition-colors"},Ye={key:0,class:"pt-4 border-t border-white/5 space-y-3"},qe={class:"flex-grow flex items-center justify-between gap-4"},Qe={class:"text-[11px] text-red-400 font-medium leading-relaxed"},Xe=["onClick"],Ge={class:"text-[11px] text-amber-400 font-medium leading-relaxed"},Ke={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-md"},Ze={class:"bg-white w-full max-w-2xl rounded-[3rem] shadow-premium p-12 relative scale-in-center"},et={class:"space-y-8"},tt={class:"space-y-3"},at={__name:"Edit",props:{schema:Object,schemaTypes:Array},setup(f){const b=pe(),w=f,_=()=>Math.random().toString(36).substr(2,9)+Date.now().toString(36),A=r=>r.map(t=>({...t,_uid:_(),children:A(t.recursive_children||t.children||[])})),d=u(w.schema.root_fields?A(JSON.parse(JSON.stringify(w.schema.root_fields))):[]),k=u(""),v=u(!1),C=u(!1),j=u(""),h=u(!1),S=u(""),m=u(!1),y=u([]),J=u([]),M=u(!1),N=u(!0);let B=null;const Y=ce(()=>k.value.split(`
`)),L=()=>{d.value.push({_uid:_(),field_path:"",field_type:"text",field_value:"",children:[]}),x()},q=r=>{d.value.splice(r,1),x()},I=r=>{const t={...r,_uid:_()};return r.children&&r.children.length>0&&(t.children=r.children.map(s=>I(s))),t},Q=r=>{const t=JSON.parse(JSON.stringify(d.value[r])),s=I(t);d.value.splice(r+1,0,s),x()},D=r=>{const t={};return r.forEach(s=>{s.field_path&&(s.field_type==="object"?t[s.field_path]=D(s.children||[]):s.field_type==="array"?t[s.field_path]=(s.children||[]).map(l=>l.field_type==="object"?D(l.children||[]):R(l.field_value,l.field_type)):t[s.field_path]=R(s.field_value,s.field_type))}),t},R=(r,t)=>t==="number"?parseFloat(r)||0:t==="boolean"?r==="true"||r===!0:r,x=()=>{const r={"@context":"https://schema.org","@type":w.schema.schema_type.name,"@id":w.schema.schema_id,...D(d.value)};k.value=JSON.stringify(r,null,2),h.value||(S.value=k.value),X()},X=()=>{B&&clearTimeout(B),B=setTimeout(async()=>{try{M.value=!0;const r=JSON.parse(k.value),t=await ue.post("/api/validate-schema",{json_ld:r});y.value=t.data.errors||[],J.value=t.data.warnings||[],M.value=!1}catch{M.value=!1}},1e3)},z=r=>typeof r=="number"?"number":typeof r=="boolean"?"boolean":typeof r=="string"&&(r.startsWith("http://")||r.startsWith("https://"))?"url":"text",F=r=>Object.entries(r).filter(([t])=>!["@context","@type","@id"].includes(t)).map(([t,s])=>{let l="text",o=s,c=[];return Array.isArray(s)?(l="array",o="",c=s.map(i=>typeof i=="object"&&i!==null?{field_path:"",field_type:"object",field_value:"",children:F(i)}:{field_path:"",field_type:z(i),field_value:i,children:[]})):typeof s=="object"&&s!==null?(l="object",o="",c=F(s)):(l=z(s),o=s),{field_path:t,field_type:l,field_value:o,children:c}}),G=()=>{try{const r=JSON.parse(j.value),t=F(r);d.value=[...d.value,...t],x(),C.value=!1,j.value="",b.success("Intelligence Interpreter has expanded the form architecture!")}catch{b.error("Parse Error: Please ensure you are pasting valid JSON-LD.")}},K=()=>{h.value=!h.value,h.value||x()},Z=r=>{const t=r.field.split(".").map(o=>{if(o.includes("[")){const[c,i]=o.split("["),T=parseInt(i.replace("]",""));return{name:c,index:T,isArray:!0}}return{name:o,isArray:!1}});let s=d.value,l=!0;for(let o=0;o<t.length-1;o++){const c=t[o];let i=s.find(T=>T.field_path===c.name);if(!i){b.error(`Cannot apply fix: Parent field '${c.name}' not found.`),l=!1;break}if(c.isArray){if(!i.children||!i.children[c.index]){b.error(`Cannot apply fix: Array index ${c.index} out of bounds.`),l=!1;break}s=i.children[c.index].children}else s=i.children}if(l){const o=t[t.length-1];s.some(i=>i.field_path===o.name)||(s.push({_uid:_(),field_path:o.name,field_type:"text",field_value:"",children:[]}),x(),b.success(`Fixed: Added '${o.name}' property.`))}},ee=()=>{try{const r=JSON.parse(S.value);m.value=!1,d.value=F(r)}catch{m.value=!0}},te=()=>{v.value=!0,de.post(`/schemas/${w.schema.id}/fields/bulk`,{fields:d.value},{onSuccess:()=>{v.value=!1},onError:()=>{v.value=!1}})},se=r=>r.replace(/"([^"]+)"(?=:)/g,'<span class="text-blue-400">"$1"</span>').replace(new RegExp('(?<=: )"([^"]+)"',"g"),'<span class="text-emerald-300">"$1"</span>').replace(new RegExp("(?<=: )(\\d+)","g"),'<span class="text-amber-400">$1</span>'),re=()=>{navigator.clipboard.writeText(k.value),b.success("Optimized JSON-LD copied to clipboard!")};return le(()=>{x()}),(r,t)=>(a(),oe(xe,{title:`Editing ${f.schema.name}`},{default:H(()=>[e("div",fe,[e("div",be,[e("div",ve,[U(ae(ne),{href:"/schemas",class:"hidden lg:flex items-center justify-center w-12 h-12 bg-white rounded-2xl border border-slate-200 text-slate-400 hover:text-slate-900 transition-standard shadow-sm active:scale-90"},{default:H(()=>[...t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e("div",null,[e("div",me,[e("h1",ge,p(f.schema.name),1),e("span",we,p(f.schema.schema_type.name),1)]),e("p",ke,p(f.schema.schema_id),1)])]),e("div",ye,[e("a",{href:`/schemas/${f.schema.id}/export`,class:"flex-grow md:flex-grow-0 inline-flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-700 font-bold px-6 py-3.5 rounded-2xl hover:bg-slate-50 transition-standard active:scale-95 text-sm"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),O(" Export JSON ",-1)])],8,_e),e("button",{onClick:te,disabled:v.value,class:"flex-grow md:flex-grow-0 inline-flex items-center justify-center gap-2 bg-slate-900 border border-slate-800 text-white font-bold px-10 py-3.5 rounded-2xl hover:bg-slate-800 transition-standard shadow-xl shadow-slate-200 active:scale-95 disabled:opacity-50 text-sm"},[v.value?(a(),n("span",je)):g("",!0),O(" "+p(v.value?"Syncing...":"Save Changes"),1)],8,Ce)])]),e("div",Se,[e("div",Me,[t[11]||(t[11]=e("div",{class:"flex justify-between items-center mb-2"},[e("h3",{class:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] ml-2"},"Properties Map")],-1)),e("div",Ne,[(a(!0),n($,null,P(d.value,s=>(a(),n("div",{key:s._uid},[U(he,{field:s,onRemove:l=>q(d.value.indexOf(s)),onDuplicate:l=>Q(d.value.indexOf(s)),onUpdate:x},null,8,["field","onRemove","onDuplicate"])]))),128)),e("div",{class:"pt-6"},[e("button",{onClick:L,class:"group flex items-center gap-3 bg-white border-2 border-dashed border-slate-200 w-full py-6 rounded-[2rem] text-slate-400 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600 transition-standard active:scale-[0.98]"},[...t[7]||(t[7]=[e("div",{class:"mx-auto flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-standard"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])]),e("span",{class:"text-sm font-black uppercase tracking-widest"},"New Property Layer")],-1)])])]),d.value.length===0?(a(),n("div",Fe,[t[8]||(t[8]=e("div",{class:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6"},[e("svg",{class:"w-10 h-10 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[9]||(t[9]=e("h4",{class:"text-xl font-bold text-slate-900 mb-2 font-display"},"No Metadata Defined",-1)),t[10]||(t[10]=e("p",{class:"text-slate-500 font-medium mb-10 max-w-xs"},"Start configuring your JSON-LD by adding properties to the root level.",-1)),e("button",{onClick:L,class:"bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold hover:bg-blue-500 transition-standard active:scale-95 shadow-lg shadow-blue-100"}," Insert First Property ")])):g("",!0)])]),e("div",Oe,[e("div",$e,[e("div",Pe,[t[14]||(t[14]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-3 h-3 bg-red-500/80 rounded-full"}),e("div",{class:"w-3 h-3 bg-amber-500/80 rounded-full"}),e("div",{class:"w-3 h-3 bg-emerald-500/80 rounded-full"}),e("span",{class:"ml-4 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})]),O(" Real-time Intelligence ")])],-1)),e("div",Ee,[e("button",{onClick:t[0]||(t[0]=s=>N.value=!N.value),class:E([N.value?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-white/5 text-slate-400 border-white/5","px-3 py-2 rounded-xl transition-standard border text-[10px] font-black uppercase tracking-widest active:scale-90 flex items-center gap-2 hover:bg-indigo-500/20"])},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),O(" Validation ",-1)])],2),e("button",{onClick:K,class:E([h.value?"bg-emerald-500 text-white":"bg-white/5 text-slate-400 hover:text-white","px-4 py-2 rounded-xl transition-standard border border-white/5 text-[10px] font-black uppercase tracking-widest active:scale-90"])},p(h.value?"Viewing Highlighted":"Edit as Code"),3),e("button",{onClick:t[1]||(t[1]=s=>C.value=!0),class:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 px-4 py-2 rounded-xl transition-standard border border-blue-500/20 text-[10px] font-black uppercase tracking-widest active:scale-90"}," Import Code "),e("button",{onClick:re,class:"bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white p-3 rounded-xl transition-standard border border-white/5 active:scale-90",title:"Copy Code"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)])])])]),e("div",Je,[h.value?V((a(),n("textarea",{key:0,"onUpdate:modelValue":t[2]||(t[2]=s=>S.value=s),onInput:ee,class:"absolute inset-0 w-full h-full p-8 bg-transparent text-slate-300 resize-none border-none focus:ring-0 font-mono text-[13px] custom-scrollbar-dark",spellcheck:"false"},null,544)),[[W,S.value]]):(a(),n("pre",Be,[e("code",De,[(a(!0),n($,null,P(Y.value,(s,l)=>(a(),n("span",{key:l,class:"flex gap-6"},[e("span",Te,p(l+1),1),e("span",{class:"text-slate-300 whitespace-pre",innerHTML:se(s)},null,8,Ve)]))),128))])]))]),V(e("div",Ae,[e("div",Le,[e("div",Ie,[e("div",Re,[t[15]||(t[15]=e("span",{class:"text-[9px] font-black text-slate-500 uppercase tracking-widest"},"Compiler",-1)),e("span",{class:E([m.value?"text-red-400":"text-emerald-400","text-[11px] font-bold"])},p(m.value?"SYNTAX ERROR":"READY"),3)]),t[16]||(t[16]=e("div",{class:"w-px h-8 bg-slate-800 mx-2"},null,-1)),t[17]||(t[17]=e("div",{class:"flex flex-col"},[e("span",{class:"text-[9px] font-black text-slate-500 uppercase tracking-widest"},"Protocol"),e("span",{class:"text-[11px] text-blue-400 font-bold"},"JSON-LD 1.1")],-1))]),e("div",ze,[M.value?(a(),n("div",He)):g("",!0),e("div",Ue,[e("span",{class:E([y.value.length>0||m.value?"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]","w-2 h-2 rounded-full"])},null,2),e("span",We,p(y.value.length>0||m.value?"Action Required":"SEO Standard Passed"),1)])])]),y.value.length>0||J.value.length>0?(a(),n("div",Ye,[(a(!0),n($,null,P(y.value,(s,l)=>(a(),n("div",{key:"err-"+l,class:"flex gap-3 items-start p-3 bg-red-500/10 rounded-xl border border-red-500/20"},[t[18]||(t[18]=e("svg",{class:"w-4 h-4 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",qe,[e("span",Qe,p(s.message),1),s.code==="missing_field"?(a(),n("button",{key:0,onClick:o=>Z(s),class:"text-[9px] font-black uppercase tracking-widest bg-red-500/20 text-red-400 px-3 py-1.5 rounded-lg hover:bg-red-500 hover:text-white transition-standard"}," Quick Fix ",8,Xe)):g("",!0)])]))),128)),(a(!0),n($,null,P(J.value,(s,l)=>(a(),n("div",{key:"warn-"+l,class:"flex gap-3 items-start p-3 bg-amber-500/10 rounded-xl border border-amber-500/20"},[t[19]||(t[19]=e("svg",{class:"w-4 h-4 text-amber-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Ge,p(s.message),1)]))),128))])):g("",!0)],512),[[ie,N.value]])])])])]),C.value?(a(),n("div",Ke,[e("div",Ze,[e("button",{onClick:t[3]||(t[3]=s=>C.value=!1),class:"absolute top-10 right-10 text-slate-300 hover:text-slate-900 transition-colors"},[...t[20]||(t[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),t[22]||(t[22]=e("h2",{class:"text-3xl font-black text-slate-900 mb-8 tracking-tight"},"Import JSON-LD",-1)),e("div",et,[e("div",tt,[t[21]||(t[21]=e("label",{class:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-4"},"Paste code snippet",-1)),V(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>j.value=s),rows:"8",placeholder:'{ "@context": "https://schema.org", ... }',class:"w-full px-8 py-6 rounded-3xl bg-slate-50 border-transparent focus:bg-white focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-standard font-mono text-sm"},null,512),[[W,j.value]])]),e("button",{onClick:G,class:"w-full bg-blue-600 text-white py-5 rounded-[2rem] font-black text-lg shadow-xl shadow-blue-100 hover:scale-105 active:scale-95 transition-standard"}," Populate Form Architecture ")])])])):g("",!0)]),_:1},8,["title"]))}};export{at as default};
