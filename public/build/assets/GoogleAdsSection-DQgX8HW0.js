import{r as x,o as F,w as j,b as l,c as r,x as _,f as t,h as z,j as N,t as o,g as k,d as w,u as P,n as C,k as B,F as E,i as M,s as b,q as f}from"./app-c-fTTCOh.js";import R from"./AdPredictionsCard-BIPQJ6iL.js";import{C as V,p as G,c as T,d as O,b as $,P as H,L as U,a as q,i as W}from"./chart-BeBNpv4U.js";import{L as Z}from"./index-Cq55bBb5.js";/* empty css            */const J={class:"space-y-10"},K={key:0,class:"bg-white p-12 rounded-[3rem] border border-slate-100 shadow-premium text-center max-w-2xl mx-auto"},Q={class:"flex flex-col sm:flex-row items-center gap-4 max-w-md mx-auto"},X=["disabled"],Y={key:0,class:"text-red-500 text-sm font-bold mt-4"},tt={key:1,class:"space-y-10 animate-fade-in"},et={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},st={class:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium"},ot={class:"text-3xl font-black text-slate-900 mt-2"},at={class:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium"},lt={class:"text-3xl font-black text-slate-900 mt-2"},rt={class:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium"},nt={class:"text-3xl font-black text-slate-900 mt-2 text-blue-600"},it={class:"bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-premium"},dt={class:"text-3xl font-black text-slate-900 mt-2"},ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ut={class:"lg:col-span-2 bg-white p-10 rounded-[3rem] border border-slate-100 shadow-premium min-h-[400px]"},pt={key:0,class:"h-64 flex items-center justify-center"},xt={key:1,class:"h-64"},gt={key:2,class:"h-64 flex items-center justify-center bg-slate-50 rounded-3xl border border-dashed border-slate-200"},mt={class:"bg-white rounded-[3rem] border border-slate-100 shadow-premium overflow-hidden"},bt={class:"p-10 border-b border-slate-100 flex items-center justify-between"},ft={class:"text-slate-500 font-medium mt-1"},ht=["disabled"],vt={class:"overflow-x-auto"},yt={class:"w-full text-left border-collapse"},_t={class:"divide-y divide-slate-50"},kt={class:"py-6 pl-10"},wt={class:"font-black text-slate-900 group-hover:text-blue-600 transition-colors"},Ct={class:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1"},St={class:"py-6 text-center"},Lt={class:"py-6 text-right font-bold text-slate-600"},Dt={class:"py-6 text-right font-bold text-slate-600"},At={class:"py-6 text-right font-bold text-slate-900"},It={class:"py-6 text-right font-black text-blue-600"},Ft={class:"py-6 pr-10 text-right font-bold text-slate-600"},jt={key:0},Mt={__name:"GoogleAdsSection",props:{propertyId:[Number,String],organization:Object},setup(h){V.register(G,T,O,$,H,U,q,W);const d=h,p=x(d.organization?.ads_customer_id||""),g=x(!1),i=x(!1),n=x({campaigns:[],forecast:null,last_sync:null}),c=x(null),v=f(()=>!!d.organization?.ads_customer_id),m=async()=>{if(!(!v.value||!d.propertyId)){i.value=!0;try{const a=await b.get(route("google-ads.index",{property_id:d.propertyId}));n.value=a.data}catch(a){console.error("Failed to fetch Google Ads data",a),c.value="Failed to load campaign data"}finally{i.value=!1}}},S=async()=>{if(p.value){g.value=!0,c.value=null;try{await b.post(route("google-ads.connect"),{customer_id:p.value}),window.location.reload()}catch(a){c.value=a.response?.data?.error||"Connection failed"}finally{g.value=!1}}},L=async()=>{i.value=!0;try{await b.post(route("google-ads.sync")),setTimeout(m,2e3)}catch{c.value="Sync failed"}finally{i.value=!1}};F(m),j(()=>d.propertyId,m);const y=f(()=>{if(!n.value.forecast||!n.value.forecast.ds)return null;const a=n.value.forecast.ds,e=n.value.forecast.yhat,s=n.value.forecast.yhat_lower,A=n.value.forecast.yhat_upper;return{labels:a.map(I=>new Date(I).toLocaleDateString(void 0,{month:"short",day:"numeric"})),datasets:[{label:"Forecast",data:e,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,borderWidth:3,pointRadius:0},{label:"Confidence Interval",data:A,borderColor:"transparent",backgroundColor:"rgba(59, 130, 246, 0.05)",fill:"+1",tension:.4,pointRadius:0},{label:"Lower Bound",data:s,borderColor:"transparent",backgroundColor:"rgba(59, 130, 246, 0.05)",fill:!1,tension:.4,pointRadius:0}]}}),D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f1f5f9"}}}},u=f(()=>{const a=n.value.campaigns;return{spend:a.reduce((e,s)=>e+s.metrics.cost_micros/1e6,0),clicks:a.reduce((e,s)=>e+s.metrics.clicks,0),conversions:a.reduce((e,s)=>e+s.metrics.conversions,0),impressions:a.reduce((e,s)=>e+s.metrics.impressions,0)}});return(a,e)=>(l(),r("div",J,[v.value?(l(),r("div",tt,[t("div",et,[t("div",st,[e[2]||(e[2]=t("p",{class:"text-xs font-black text-slate-400 uppercase tracking-widest"},"Total Spend",-1)),t("h3",ot,"$"+o(u.value.spend.toLocaleString(void 0,{minimumFractionDigits:2})),1)]),t("div",at,[e[3]||(e[3]=t("p",{class:"text-xs font-black text-slate-400 uppercase tracking-widest"},"Ad Clicks",-1)),t("h3",lt,o(u.value.clicks.toLocaleString()),1)]),t("div",rt,[e[4]||(e[4]=t("p",{class:"text-xs font-black text-slate-400 uppercase tracking-widest"},"Conversions",-1)),t("h3",nt,o(u.value.conversions.toLocaleString()),1)]),t("div",it,[e[5]||(e[5]=t("p",{class:"text-xs font-black text-slate-400 uppercase tracking-widest"},"ROAS",-1)),t("h3",dt,o(u.value.spend>0?(u.value.conversions/u.value.spend).toFixed(2):"0")+"x",1)])]),t("div",ct,[t("div",ut,[e[8]||(e[8]=_('<div class="flex items-center justify-between mb-10"><div><h3 class="text-xl font-black text-slate-900">Performance Forecast</h3><p class="text-slate-400 text-sm font-bold mt-1 uppercase tracking-wider">Powered by Prophet ML engine</p></div><div class="flex items-center gap-2"><span class="w-3 h-3 bg-blue-500 rounded-full"></span><span class="text-xs font-black text-slate-500 uppercase tracking-widest">Predicted Conversions</span></div></div>',1)),i.value?(l(),r("div",pt,[...e[6]||(e[6]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):y.value?(l(),r("div",xt,[w(P(Z),{data:y.value,options:D},null,8,["data"])])):(l(),r("div",gt,[...e[7]||(e[7]=[t("p",{class:"text-slate-400 font-bold italic"},"Generating forecast models...",-1)])]))]),w(R,{title:"Ad Strategy Insight",recommendations:d.organization?.ad_predictions||[],"is-loading":i.value},null,8,["recommendations","is-loading"])]),t("div",mt,[t("div",bt,[t("div",null,[e[9]||(e[9]=t("h3",{class:"text-2xl font-black text-slate-900"},"Google Ads Campaigns",-1)),t("p",ft,"Direct API sync for Customer ID: "+o(h.organization?.ads_customer_id),1)]),t("button",{onClick:L,disabled:i.value,class:"flex items-center gap-2 bg-slate-50 hover:bg-slate-100 text-slate-700 px-6 py-3 rounded-2xl font-bold transition-all disabled:opacity-50"},[(l(),r("svg",{class:C([{"animate-spin":i.value},"w-5 h-5"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e[11]||(e[11]=B(" Manual Sync ",-1))],8,ht)]),t("div",vt,[t("table",yt,[e[13]||(e[13]=t("thead",{class:"bg-slate-50/50"},[t("tr",null,[t("th",{class:"py-6 pl-10 text-xs font-black text-slate-400 uppercase tracking-widest"},"Campaign"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest text-center"},"Status"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"Impressions"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"Clicks"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"Cost"),t("th",{class:"py-6 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"Conversions"),t("th",{class:"py-6 pr-10 text-xs font-black text-slate-400 uppercase tracking-widest text-right"},"CTR")])],-1)),t("tbody",_t,[(l(!0),r(E,null,M(n.value.campaigns,s=>(l(),r("tr",{key:s.id,class:"group hover:bg-slate-50/50 transition-colors"},[t("td",kt,[t("div",wt,o(s.name),1),t("div",Ct,o(s.campaign_type),1)]),t("td",St,[t("span",{class:C([s.status==="ENABLED"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600","px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter"])},o(s.status),3)]),t("td",Lt,o(s.metrics.impressions.toLocaleString()),1),t("td",Dt,o(s.metrics.clicks.toLocaleString()),1),t("td",At,"$"+o((s.metrics.cost_micros/1e6).toLocaleString(void 0,{minimumFractionDigits:2})),1),t("td",It,o(s.metrics.conversions.toLocaleString()),1),t("td",Ft,o((s.metrics.ctr*100).toFixed(2))+"%",1)]))),128)),n.value.campaigns.length===0&&!i.value?(l(),r("tr",jt,[...e[12]||(e[12]=[t("td",{colspan:"7",class:"py-20 text-center"},[t("p",{class:"text-slate-400 font-bold italic"},"No campaigns found for this customer ID.")],-1)])])):k("",!0)])])])])])):(l(),r("div",K,[e[1]||(e[1]=_('<div class="w-20 h-20 bg-blue-50 rounded-[2rem] flex items-center justify-center text-blue-600 mx-auto mb-8 shadow-inner"><svg class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14l-4-4 1.41-1.41L11 13.17l7.59-7.59L20 7l-9 9z"></path></svg></div><h2 class="text-3xl font-black text-slate-900 tracking-tight">Connect Google Ads</h2><p class="text-slate-500 font-medium mt-4 mb-10 leading-relaxed"> Unlock Prophet-driven performance forecasts and deep monitoring for your ad campaigns. Enter your 10-digit Customer ID below. </p>',3)),t("div",Q,[z(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),placeholder:"123-456-7890",class:"w-full bg-slate-50 border-transparent focus:border-blue-500 focus:ring-0 rounded-2xl py-4 px-6 font-bold text-slate-700 shadow-inner"},null,512),[[N,p.value]]),t("button",{onClick:S,disabled:g.value||!p.value,class:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-10 py-4 rounded-2xl font-black uppercase tracking-widest text-xs transition-all shadow-lg shadow-blue-200 active:scale-95 disabled:opacity-50"},o(g.value?"Connecting...":"Connect"),9,X)]),c.value?(l(),r("p",Y,o(c.value),1)):k("",!0)]))]))}};export{Mt as default};
